webpackJsonp([1],{"+5Pr":function(t,a){},CEWv:function(t,a){},DCbh:function(t,a){},"E+6n":function(t,a){},NHnr:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("7+uW"),s={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var n=i("VU/8")({name:"App"},s,!1,function(t){i("DCbh")},null,null).exports,o=i("/ocq"),c=i("mtWM"),l=i.n(c),r={name:"select_mac",data:function(){return{macRelation:{mac_type_id:"",workshop_id:""},selectInfo:{company_id:""},consumeList:[],machine_id:"",machineName:"",Rpm:"",chanliangb:"",MachineState:"",Shift_efficiency:"",recentRecord:[],zjTime:"",zjage:"",zjPrice:"",zjsurplus:""}},methods:{back:function(){nativeMethod.closeActivity()},getMaintainRecord:function(){var t=this;console.log(t.macRelation),l.a.post("http://120.55.124.53:8206/api/maintain/getConsumeMaterialPage",{maintainMainRecord:{mac_type_id:t.macRelation.mac_type_id,machine_id:t.machine_id},selectInfo:{company_id:t.selectInfo.company_id,page_size:3,page_num:1}},{headers:{"Content-Type":"application/json"}}).then(function(a){if(console.log(a),0!=a.data.result.consumeMaterial.length)for(var i=0;i<a.data.result.consumeMaterial.length;i++)t.consumeList.push(a.data.result.consumeMaterial[i])})},more1:function(){this.$router.push({path:"/Maintenance_details",name:"Maintenance_details",params:{mac_type_id:this.macRelation.mac_type_id,machine_id:this.machine_id,company_id:this.selectInfo.company_id,workshop_id:this.macRelation.workshop_id}})},more2:function(){this.$router.push({path:"/Component_consumption_details",name:"Component_consumption_details",params:{mac_type_id:this.macRelation.mac_type_id,machine_id:this.machine_id,company_id:this.selectInfo.company_id,workshop_id:this.macRelation.workshop_id}})},getEedsMachineList:function(){var t=this;console.log(t.machine_id),l.a.post("http://120.55.124.53:8211/machine/getEedsMachineList",{machineId:t.machine_id,page:1,pageSize:10},{headers:{"Content-Type":"application/json",companyId:t.selectInfo.company_id}}).then(function(a){console.log(a),t.zjTime=a.data.data[0].machineProTime,t.zjage=a.data.data[0].age,t.zjPrice=a.data.data[0].price,t.zjsurplus=a.data.data[0].discountRatePrice})},getTypeInfo:function(){var t="lm_run_"+this.selectInfo.company_id,a=(this.macRelation.workshop_id,this);l.a.post("http://106.12.219.66:8227/report/getSimpleReport",{tableName:t,pageNum:1,pageSize:1e4},{headers:{"Content-Type":"application/json",companyId:0}}).then(function(t){a.Rpm=t.data.data[0].Rpm,a.chanliangb=t.data.data[0].chanliangb,a.MachineState=t.data.data[0].MachineState,a.Shift_efficiency=t.data.data[0].Shift_efficiency})},getMachineName:function(){var t={"Content-Type":"application/json",companyId:this.selectInfo.company_id},a=this;l.a.get("http://106.12.219.66:8763/com-machine-info/selectAMachineRelation",{params:{machineId:a.machine_id},headers:t}).then(function(t){console.log(t),a.machineName=t.data.data[0].machineName,a.macRelation.mac_type_id=t.data.data[0].machineType,a.macRelation.workshop_id=t.data.data[0].workshopId,a.getEedsMachineList(),a.getMachineRecord()})},getMachineRecord:function(){this.getMaintainRecord();var t={company_id:this.selectInfo.company_id,page_size:2,page_num:1},a=this;l.a.post("http://120.55.124.53:8206/api/maintain/getRecentMaintainRecord",{macRelation:{mac_type_id:a.macRelation.mac_type_id,workshop_id:a.macRelation.workshop_id},selectInfo:t}).then(function(t){console.log(t),a.recentRecord=[];for(var i=0;i<t.data.result.machine_list.length;i++)a.recentRecord.push(t.data.result.machine_list[i]);for(var e=function(t){l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainDetail",{company_id:a.selectInfo.company_id,id:a.recentRecord[t].big_maintain.id}).then(function(i){0==i.data.result.consumeMaterials.length?a.recentRecord[t].big_maintain.consumeMaterial="无更换物品":a.recentRecord[t].big_maintain.consumeMaterial="有更换物品"}),l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainDetail",{company_id:a.selectInfo.company_id,id:a.recentRecord[t].small_maintain.id}).then(function(i){0==i.data.result.consumeMaterials.length?a.recentRecord[t].small_maintain.consumeMaterial="无更换物品":a.recentRecord[t].small_maintain.consumeMaterial="有更换物品"})},s=0;s<a.recentRecord.length;s++)e(s)})},getNowFormatDate:function(t){var a=t.getFullYear(),i=t.getMonth()+1,e=t.getDate();return i<10&&(i="0"+i),e<10&&(e="0"+e),a+"年"+i+"月"+e+"日"}},mounted:function(){console.log(this.$route.params),this.machine_id=this.$route.params.machine_id,this.selectInfo.company_id=this.$route.params.company_id,this.getMachineName(),this.getTypeInfo(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},d={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("查询")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticClass:"contain"},[i("div",{staticClass:"head"},[i("div",{staticClass:"con",staticStyle:{width:"55%"}},[i("span",[t._v("编号："+t._s(t.machine_id))])]),t._v(" "),i("div",{staticClass:"con"},[i("span",[t._v("名称："+t._s(t.machineName))])])])]),t._v(" "),i("div",{staticStyle:{overflow:"auto",height:"85%"}},[i("div",{staticClass:"contain"},[i("div",{staticClass:"card"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-one"},[i("span",[t._v("设备状态:"+t._s(t.MachineState))]),t._v(" "),i("span",[t._v("运行速度:"+t._s(t.Rpm))])])]),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-one"},[i("span",[t._v("班产量:"+t._s(t.chanliangb))]),t._v(" "),i("span",[t._v("班效率:"+t._s(t.Shift_efficiency))])])])])]),t._v(" "),i("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",[t._v("维保记录")]),i("span",{staticStyle:{"margin-right":"20px",color:"blue"},on:{click:t.more1}},[t._v("更多")])]),t._v(" "),t._m(2),t._v(" "),t._l(t.recentRecord,function(a){return i("div",{staticStyle:{height:"50%",display:"flex","flex-direction":"column","justify-content":"center"}},[i("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"content-two"},[i("span",[t._v(t._s(a.big_maintain.maintain_time))]),t._v(" "),i("span",[t._v("大保养")]),t._v(" "),i("span",[t._v(t._s(a.big_maintain.consumeMaterial))])])]),t._v(" "),i("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"content-two"},[i("span",[t._v(t._s(a.small_maintain.maintain_time))]),t._v(" "),i("span",[t._v("小保养")]),t._v(" "),i("span",[t._v(t._s(a.small_maintain.consumeMaterial))])])])])})],2)]),t._v(" "),i("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",[t._v("部品消耗")]),i("span",{staticStyle:{"margin-right":"20px",color:"blue"},on:{click:t.more2}},[t._v("更多")])]),t._v(" "),t._m(3),t._v(" "),t._l(t.consumeList,function(a){return i("div",{staticClass:"card-content2"},[i("div",{staticClass:"content-two"},[i("span",[t._v(t._s(a.consume_time))]),t._v(" "),i("span",[t._v(t._s(a.product_name))]),t._v(" "),i("span",[t._v(t._s(a.quantity))])])])})],2)]),t._v(" "),i("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"card2"},[t._m(4),t._v(" "),t._m(5),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-one"},[i("span",[t._v("购买时间:"+t._s(t.zjTime))]),t._v(" "),i("span",[t._v("设备年限:"+t._s(t.zjage))])])]),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-one"},[i("span",[t._v("购买成本:"+t._s(t.zjPrice))]),t._v(" "),i("span",[t._v("折旧剩余:"+t._s(t.zjsurplus))])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-head"},[a("span",[this._v("设备实况")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-head"},[a("span",[this._v("折旧摊提")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])}]};var p=i("VU/8")(r,d,!1,function(t){i("lQIc")},"data-v-492208a1",null).exports,h=i("POcy"),m=i.n(h),_={name:"Maintenance_details",data:function(){return{machine_id:"",company_id:"",mac_type_id:"",page_size:15,page_num:1,total_data_num:0,datalist:[],workshop_id:0}},methods:{getMaintainRecordPage:function(){var t=this;l.a.post("http://120.55.124.53:8206/api/maintain/getRecentMaintainRecord",{macRelation:{mac_type_id:t.mac_type_id,workshop_id:t.workshop_id},selectInfo:{company_id:t.company_id,page_size:t.page_size,page_num:t.page_num}},{headers:{"Content-Type":"application/json"}}).then(function(a){if(0==a.data.result.machine_list.length)return t.$message({message:"没有更多数据了！",center:!0,duration:1e3}),void t.$refs.my_scroller.finishInfinite(!0);t.total_data_num=a.data.result.total_data_num,t.$refs.my_scroller.finishPullToRefresh(!0);for(var i=0;i<a.data.result.machine_list.length;i++)t.datalist.push(a.data.result.machine_list[i]);for(var e=function(a){l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainDetail",{company_id:t.company_id,id:t.datalist[a].big_maintain.id}).then(function(i){null!=i.data.result.consumeMaterials?0==i.data.result.consumeMaterials.length?t.datalist[a].big_maintain.consumeMaterial="无更换物品":t.datalist[a].big_maintain.consumeMaterial="有更换物品":t.datalist[a].big_maintain.consumeMaterial="无更换物品"}),l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainDetail",{company_id:t.company_id,id:t.datalist[a].small_maintain.id}).then(function(i){null!=i.data.result.consumeMaterials?0==i.data.result.consumeMaterials.length?t.datalist[a].small_maintain.consumeMaterial="无更换物品":t.datalist[a].small_maintain.consumeMaterial="有更换物品":t.datalist[a].small_maintain.consumeMaterial="无更换物品"})},s=0;s<t.datalist.length;s++)e(s);t.$refs.my_scroller.finishInfinite(!0)})},refresh:function(){var t=this;this.datalist=[],this.page_num=1,setTimeout(function(){t.getMaintainRecordPage(),t.$message({message:"刷新成功！",center:!0,duration:1e3}),t.$refs.my_scroller.finishPullToRefresh(!1)},500)},inf:function(){var t=this;setTimeout(function(){t.datalist.length!=t.total_data_num&&0!=t.datalist.length?(t.page_num++,t.getMaintainRecordPage()):t.$refs.my_scroller.finishInfinite(!0)},500)},back:function(){this.$router.push({path:"/select",name:"select",params:{mac_type_id:this.mac_type_id,company_id:this.company_id,machine_id:this.machine_id,workshop_id:this.workshop_id}})},getParams:function(){this.mac_type_id=this.$route.params.mac_type_id,this.company_id=this.$route.params.company_id,this.machine_id=this.$route.params.machine_id,this.workshop_id=this.$route.params.workshop_id,this.getMaintainRecordPage()}},mounted:function(){this.getParams(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("维保记录详情")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("scroller",{ref:"my_scroller",attrs:{height:"100%",onRefresh:t.refresh,onInfinite:t.inf}},[i("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",[t._v("维保记录")])]),t._v(" "),i("div",{staticClass:"line"},[i("div",{staticClass:"line-con"})]),t._v(" "),t._l(t.datalist,function(a){return i("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center"}},[i("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"content-two"},[i("span",[t._v(t._s(a.big_maintain.maintain_time))]),t._v(" "),i("span",[t._v("大保养")]),t._v(" "),i("span",[t._v(t._s(a.big_maintain.consumeMaterial))])])]),t._v(" "),i("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"content-two"},[i("span",[t._v(t._s(a.small_maintain.maintain_time))]),t._v(" "),i("span",[t._v("小保养")]),t._v(" "),i("span",[t._v(t._s(a.small_maintain.consumeMaterial))])])])])})],2)])])],1)])},staticRenderFns:[]};var f=i("VU/8")(_,u,!1,function(t){i("uTfA")},"data-v-be9d5688",null).exports,v={name:"Component_consumption_details",data:function(){return{machine_id:"",company_id:"",mac_type_id:"",page_size:10,page_num:1,total_data_num:0,datalist:[]}},methods:{getConsumeMaterialPage:function(){var t=this;l.a.post("http://120.55.124.53:8206/api/maintain/getConsumeMaterialPage",{maintainMainRecord:{mac_type_id:t.mac_type_id,machine_id:t.machine_id},selectInfo:{company_id:t.company_id,page_size:t.page_size,page_num:t.page_num}},{headers:{"Content-Type":"application/json"}}).then(function(a){if(0!=a.data.result.consumeMaterial.length){t.total_data_num=a.data.result.total_data_num,t.$refs.my_scroller.finishPullToRefresh(!0);for(var i=0;i<a.data.result.consumeMaterial.length;i++)t.datalist.push(a.data.result.consumeMaterial[i]),t.$refs.my_scroller.finishInfinite(!0)}else t.$refs.my_scroller.finishInfinite(!0)})},refresh:function(){var t=this;this.datalist=[],this.page_num=1,setTimeout(function(){t.getConsumeMaterialPage(),t.$message({message:"刷新成功！",center:!0,duration:1e3}),t.$refs.my_scroller.finishPullToRefresh(!1)},500)},inf:function(){var t=this;setTimeout(function(){t.datalist.length!=t.total_data_num&&0!=t.datalist.length?(t.page_num++,t.getConsumeMaterialPage()):t.$refs.my_scroller.finishInfinite(!0)},500)},back:function(){this.$router.push({path:"/select",name:"select",params:{mac_type_id:this.mac_type_id,company_id:this.company_id,machine_id:this.machine_id}})},getParams:function(){this.mac_type_id=this.$route.params.mac_type_id,this.company_id=this.$route.params.company_id,this.machine_id=this.$route.params.machine_id,this.getConsumeMaterialPage()}},mounted:function(){console.log(this.$route.params),this.getParams(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},g={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("部品消耗详情")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("scroller",{ref:"my_scroller",attrs:{height:"100%",onRefresh:t.refresh,onInfinite:t.inf}},[i("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",[t._v("部品消耗")])]),t._v(" "),i("div",{staticClass:"line"},[i("div",{staticClass:"line-con"})]),t._v(" "),t._l(t.datalist,function(a){return i("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"content-two"},[i("span",[t._v(t._s(a.consume_time))]),t._v(" "),i("span",[t._v(t._s(a.product_name)+"部品")]),t._v(" "),i("span",[t._v(t._s(a.quantity)+"个")])])])})],2)])])],1)])},staticRenderFns:[]};var y=i("VU/8")(v,g,!1,function(t){i("XDzH")},"data-v-3f4bd1b4",null).exports,C={name:"ToMaintenance_list",data:function(){return{staff_id:"",macRelation:{machine_id:"",workshop_id:""},selectInfo:{company_id:""},operator:""}},methods:{back:function(){nativeMethod.closeActivity()},toMaintenance_list:function(){this.$router.push({path:"/Maintenance_list",name:"Maintenance_list",params:{operator:this.operator,company_id:this.selectInfo.company_id,staff_id:this.staff_id}})},toMaintenance_history:function(){this.$router.push({path:"/Maintenance_history",name:"Maintenance_history",params:{operator:this.operator,company_id:this.selectInfo.company_id,staff_id:this.staff_id}})}},mounted:function(){this.operator=this.$route.params.operator,this.selectInfo.company_id=this.$route.params.company_id,this.staff_id=this.$route.params.staff_id,history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},w={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("保养")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticClass:"choose",on:{click:t.toMaintenance_list}},[t._m(0)]),t._v(" "),i("div",{staticClass:"choose2",on:{click:t.toMaintenance_history}},[t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"choose-con"},[a("span",[this._v("待保养记录")]),a("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"choose-con"},[a("span",[this._v("保养历史记录")]),a("i",{staticClass:"el-icon-arrow-right"})])}]};var k=i("VU/8")(C,w,!1,function(t){i("CEWv")},"data-v-372bc00f",null).exports,S={name:"Maintenance_history",data:function(){return{staff_id:"",macRelation:{machine_id:"",workshop_id:""},selectInfo:{company_id:""},operator:"",start_time:"",end_time:"",page_size:10,page_num:1,total_data_num:null,dataList:[],newStaff_id:"",staffList:[{staff_name:"zpd",id:2},{staff_name:"zps",id:3}]}},methods:{change:function(t){this.newStaff_id=t.target.value,this.dataList=[],this.page_num=1,this.getData(this.newStaff_id)},back:function(){this.$router.push({path:"/ToMaintenance_list",name:"ToMaintenance_list",params:{machine_id:this.macRelation.machine_id,operator:this.operator,workshop_id:this.macRelation.workshop_id,company_id:this.selectInfo.company_id,staff_id:this.staff_id}})},toDetail:function(t){this.$router.push({path:"/Maintenance_history_detail",name:"Maintenance_history_detail",params:{machine_id:this.macRelation.machine_id,operator:this.operator,workshop_id:this.macRelation.workshop_id,company_id:this.selectInfo.company_id,id:t}})},refresh:function(){var t=this;this.page_num=1,this.dataList=[],setTimeout(function(){t.getData(),t.$refs.my_scroller.finishPullToRefresh()},500)},inf:function(){var t=this;setTimeout(function(){t.dataList.length!=t.total_data_num&&0!=t.dataList.length?(t.page_num++,t.getData()):t.$refs.my_scroller.finishInfinite(!0)},500)},getData:function(t){console.log(t);var a=this,i={};i=""!=a.macRelation.machine_id?{machine_id:a.macRelation.machine_id}:{},l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainRecordPage",{maintainMainRecord:i,selectInfo:{company_id:a.selectInfo.company_id,page_size:a.page_size,page_num:a.page_num,start_time:a.start_time,end_time:a.end_time}},{}).then(function(t){if(console.log(t.data.result.maintainRecord),0!=t.data.result.maintainRecord.length){a.total_data_num=t.data.result.total_data_num,a.$refs.my_scroller.finishPullToRefresh(!0);for(var i=0;i<t.data.result.maintainRecord.length;i++)a.dataList.push(t.data.result.maintainRecord[i]);a.$refs.my_scroller.finishInfinite(!0)}else a.$refs.my_scroller.finishInfinite(!0)})},GetDateStr:function(t){var a=new Date;return a.setDate(a.getDate()+t),a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())},query:function(){this.page_num=1,this.dataList=[],this.getData()}},mounted:function(){history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)}),this.start_time=this.GetDateStr(-3),this.end_time=this.GetDateStr(3),this.dataList=[],this.staff_id=this.$route.params.staff_id,this.operator=this.$route.params.operator,this.selectInfo.company_id=this.$route.params.company_id,this.getData()}},b={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("保养历史记录")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticClass:"query"},[i("span",{staticStyle:{"margin-left":"10px","font-size":"0.5em","margin-right":"10px"}},[t._v("开始时间")]),t._v(" "),i("el-date-picker",{staticStyle:{width:"40%"},attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.start_time,callback:function(a){t.start_time=a},expression:" start_time"}}),t._v(" "),i("span",{staticStyle:{margin:"18px","font-size":"0.5em"}},[t._v("机台号")]),t._v(" "),i("el-input",{staticStyle:{width:"20%"},attrs:{size:"small"},model:{value:t.macRelation.machine_id,callback:function(a){t.$set(t.macRelation,"machine_id",a)},expression:"  macRelation.machine_id"}})],1),t._v(" "),i("div",{staticClass:"query"},[i("span",{staticStyle:{margin:"10px","font-size":"0.5em"}},[t._v("结束时间")]),t._v(" "),i("el-date-picker",{staticStyle:{width:"40%","margin-right":"10px"},attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.end_time,callback:function(a){t.end_time=a},expression:"end_time"}}),t._v(" "),i("el-button",{staticStyle:{width:"20%"},attrs:{type:"primary"},on:{click:function(a){return t.query()}}},[t._v("查询")])],1),t._v(" "),i("div",{staticClass:"query"},[i("span",{staticStyle:{margin:"10px","font-size":"0.5em"}},[t._v("员工筛选")]),t._v(" "),i("select",{staticClass:"shortselect3",attrs:{name:"bbxb",id:"selecte"},on:{change:t.change}},t._l(t.staffList,function(a){return i("option",{domProps:{value:a.id}},[t._v(t._s(a.staff_name))])}),0)]),t._v(" "),i("scroller",{ref:"my_scroller",attrs:{height:"100%",onRefresh:t.refresh,onInfinite:t.inf}},[i("div",{staticClass:"scroller"},t._l(t.dataList,function(a,e){return i("div",{key:e,staticClass:"card"},[i("div",{staticClass:"card-con"},[i("span",[t._v("设备名称："+t._s(a.machine_id))])]),t._v(" "),i("div",{staticClass:"card-con"},[i("span",[t._v("保养时间："+t._s(a.maintain_time))])]),t._v(" "),i("div",{staticClass:"card-con"},[i("span",[t._v("保养人："+t._s(a.operator))])]),t._v(" "),i("div",{staticClass:"card-con"},[i("span",[t._v("保养类型："+t._s(a.maintain_type_name))])]),t._v(" "),i("div",{staticClass:"detail"},[i("div",{on:{click:function(i){return t.toDetail(a.id)}}},[i("span",[t._v("保养详情")]),i("i",{staticClass:"el-icon-arrow-right"})])])])}),0)])],1)])},staticRenderFns:[]};var I=i("VU/8")(S,b,!1,function(t){i("lG+y")},"data-v-d32cc31c",null).exports,M={name:"Maintenance_list",data:function(){return{staff_id:"",workshop_name:"",macRelation:{machine_id:"",mac_type_id:"",workshop_id:""},page_size:7,page_num:1,total_data_num:0,mac_type:[],selectInfo:{company_id:""},days_to_expire:0,operator:"",menu:[],menu2:[{id:0,name:"今日"},{id:2,name:"近三日"},{id:6,name:"近一周"}],datalist:[]}},methods:{scan:function(){nativeMethod.scan1(null,null,this.macRelation.workshop_id,this.macRelation.mac_type_id,this.selectInfo.company_id,this.days_to_expire,null)},getMacTypeCategoryList:function(){var t=this,a={"Content-Type":"application/json",companyID:this.selectInfo.company_id},i=this;l()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",data:{tableName:"mac_type",pageNum:1,pageSize:1e3,selectFields:["id","type_name"]},headers:a}).then(function(a){console.log(a.data.data),t.macRelation.mac_type_id=a.data.data[0].id;for(var e=0;e<a.data.data.length;e++)i.mac_type.push(a.data.data[e]);t.getWorkShopList()})},back:function(){this.$router.push({path:"/ToMaintenance_list",name:"ToMaintenance_list",params:{operator:this.operator,company_id:this.selectInfo.company_id,staff_id:this.staff_id}})},change:function(t){this.datalist=[],this.page_num=1,this.macRelation.workshop_id=t.target.value,this.getMachine_id()},change2:function(t){this.datalist=[],this.page_num=1,this.days_to_expire=Number(t.target.value),this.getMachine_id()},change3:function(t){this.datalist=[],this.page_num=1,this.macRelation.mac_type_id=t.target.value,this.getMachine_id()},toDetail:function(t,a,i,e,s,n){nativeMethod.scan2(e,i,s,t,this.selectInfo.company_id,this.days_to_expire,n)},getWorkShopList:function(){var t=this;l.a.post(" http://120.55.124.53:8211/workShop/getWorkShopList",{page:1,pageSize:1e4},{headers:{companyId:t.selectInfo.company_id}}).then(function(a){t.menu=a.data.data,t.macRelation.workshop_id=t.menu[0].id,t.getMachine_id()})},getMachine_id:function(){var t={mac_type_id:this.macRelation.mac_type_id,workshop_id:this.macRelation.workshop_id},a={company_id:this.selectInfo.company_id,page_size:this.page_size,page_num:this.page_num},i=this;console.log(i.staff_id),l.a.post("http://120.55.124.53:8206/api/maintain/getRecentMaintainRecord",{macRelation:t,selectInfo:a,days_to_expire:i.days_to_expire}).then(function(t){console.log(t);i.getTime(new Date);if(0!=t.data.result.machine_list.length){i.total_data_num=t.data.result.total_data_num;for(var a=0;a<t.data.result.machine_list.length;a++)for(var e=0;e<t.data.result.machine_list[a].maintain.length;e++)i.datalist.push(t.data.result.machine_list[a].maintain[e]);i.$refs.my_scroller.finishInfinite(!0)}else i.$refs.my_scroller.finishInfinite(!0)})},inf:function(){var t=this;setTimeout(function(){t.datalist.length!=t.total_data_num&&0!=t.datalist.length?(t.page_num++,t.getMachine_id()):t.$refs.my_scroller.finishInfinite(!0)},500)},refresh:function(){var t=this;this.page_num=1,this.datalist=[],setTimeout(function(){t.getMachine_id(),t.$refs.my_scroller.finishPullToRefresh()},500)},getTime:function(t){var a=t.getFullYear(),i=t.getMonth()+1,e=t.getDate();return i<10&&(i="0"+i),e<10&&(e="0"+e),a+"-"+i+"-"+e}},mounted:function(){this.operator=this.$route.params.operator,this.selectInfo.company_id=this.$route.params.company_id,this.staff_id=this.$route.params.staff_id,this.getMacTypeCategoryList(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},x={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("待保养记录")]),t._v(" "),e("img",{staticStyle:{width:"2rem",position:"fixed",right:"17px",top:"5px"},attrs:{src:i("VwSf")},on:{click:function(a){return t.scan()}}}),t._v(" "),e("div",{staticClass:"all-page"},[e("div",{staticClass:"select"},[e("select",{staticClass:"shortselect3",attrs:{name:"bbxb",id:"selecte"},on:{change:t.change3}},t._l(t.mac_type,function(a){return e("option",{domProps:{value:a.id}},[t._v(t._s(a.type_name))])}),0),t._v(" "),e("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),e("select",{staticClass:"shortselect2",attrs:{name:"bbxb",id:"selecte"},on:{change:t.change2}},t._l(t.menu2,function(a){return e("option",{domProps:{value:a.id}},[t._v(t._s(a.name))])}),0),t._v(" "),e("select",{staticClass:"shortselect",attrs:{name:"bbxb",id:"selecte"},on:{change:t.change}},t._l(t.menu,function(a){return e("option",{domProps:{value:a.id}},[t._v(t._s(a.name))])}),0)]),t._v(" "),e("scroller",{ref:"my_scroller",attrs:{height:"100%",onRefresh:t.refresh,onInfinite:t.inf}},[e("div",{staticStyle:{height:"90%",overflow:"auto"}},t._l(t.datalist,function(a){return e("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[e("div",{staticClass:"card",on:{click:function(i){return t.toDetail(a.mac_type_id,a.mac_type_name,a.maintain_type_name,a.machine_id,a.workshop_id,a.maintain_type_id)}}},[e("div",{staticClass:"card-head"},[e("div",[e("span",[t._v(t._s(t.workshop_name))]),e("span",[t._v("上次保养时间："+t._s(a.maintain_time))])]),e("span",{staticClass:"no-deal"},[t._v("待处理")])]),t._v(" "),e("div",{staticClass:"line"},[e("div",{staticClass:"line-con"})]),t._v(" "),e("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[e("div",{staticClass:"content-two",staticStyle:{"justify-content":"space-between"}},[e("span",[t._v("设备编号："+t._s(a.machine_id))]),t._v(" "),e("span",[t._v("设备类型："+t._s(a.mac_type_name))])])]),t._v(" "),e("div",{staticClass:"card-content2"},[e("div",{staticClass:"content-two"},[e("span",[t._v("保养类别："+t._s(a.maintain_type_name))])])]),t._v(" "),e("div",{staticClass:"card-content2"},[e("div",{staticClass:"content-two"},[e("span",[t._v("到期时间："+t._s(a.expire_time))])])])])])}),0)])],1)])},staticRenderFns:[]};var T=i("VU/8")(M,x,!1,function(t){i("o1+I")},"data-v-adb99400",null).exports,R=i("bOdI"),D=i.n(R),E={name:"Maintenance_materials",data:function(){var t;return t={operator:"",maintain_type_id:null,isClickIn:"",machine_id:null,company_id:"",mac_type_id:null,flag:null,type_name:null,pageNum:1,totalDataNum:0,datalist:[],menu:[],categories_id:"",searchinfo:"",workshop_id:""},D()(t,"machine_id",""),D()(t,"datalist2",[]),t},methods:{seachinfo:function(){this.$refs.input1.blur(),this.pageNum=1,this.datalist=[],""!=this.searchinfo?this.getInventory(this.searchinfo):this.getInventory()},change:function(t){this.categories_id=t.target.value,this.datalist=[],this.pageNum=1,this.getInventory(this.searchinfo)},getInventory:function(t){var a=this;0==this.menu.length&&this.getRootCategories();var i,e=this;setTimeout(function(){if(e.menu.length>0)i=t?{page:e.pageNum,pageNum:10,startDate:"1999-01-01 00:00:00",endDate:"2999-01-01 00:00:00",isFilterZero:"1",isDisable:"0",productTypeId:a.categories_id,queryConditions:t}:{page:e.pageNum,pageNum:10,startDate:"1999-01-01 00:00:00",endDate:"2999-01-01 00:00:00",isFilterZero:"1",isDisable:"0",productTypeId:a.categories_id};else if(t)e.pageNum,a.categories_id;else i={page:e.pageNum,pageNum:10,startDate:"1999-01-01 00:00:00",endDate:"2999-01-01 00:00:00",isFilterZero:"1",isDisable:"0"};l.a.post("http://120.55.124.53:16021/api/warehouse/getInventory",i,{headers:{"Content-Type":"application/json",companyId:e.company_id}}).then(function(t){if(0==t.data.data.product.length)return e.$message({message:"没有更多数据了！",center:!0,duration:1e3}),void e.$refs.my_scroller.finishInfinite(!0);e.totalDataNum=t.data.data.totalDataNum,e.$refs.my_scroller.finishPullToRefresh(!0);for(var a=0;a<t.data.data.product.length;a++)t.data.data.product[a].stockQuantitydata=t.data.data.product[a].stockQuantity,t.data.data.product[a].isinputShow=!1,t.data.data.product[a].stockQuantityShow=0,e.datalist.push(t.data.data.product[a]);e.$refs.my_scroller.finishInfinite(!0)})},300)},iscurrent:function(t,a){return t==a},getParams:function(){console.log(this.$route.params),this.mac_type_id=this.$route.params.dataObj2.mac_type_id,this.flag=this.$route.params.flag,this.type_name=this.$route.params.dataObj2.type_name,this.machine_id=this.$route.params.machine_id,this.operator=this.$route.params.operator,this.workshop_id=this.$route.params.workshop_id,this.company_id=this.$route.params.company_id,this.machine_id=this.$route.params.machine_id,this.datalist2=this.$route.params.datalist,this.maintain_type_id=this.$route.params.maintain_type_id,this.isClickIn=this.$route.params.isClickIn,console.log(this.datalist2)},back:function(){this.$router.push({path:"/Maintenance",name:"Maintenance",params:{dataObj2:{type_name:this.type_name,mac_type_id:this.mac_type_id,flag:this.flag},operator:this.operator,workshop_id:this.workshop_id,company_id:this.company_id,machine_id:this.machine_id,datalist:this.datalist2,maintain_type_id:this.maintain_type_id,isClickIn:this.isClickIn}})},refresh:function(){var t=this;this.datalist=[],this.pageNum=1,setTimeout(function(){t.getInventory(),t.$refs.my_scroller.finishPullToRefresh()},500)},inf:function(){var t=this;setTimeout(function(){t.datalist.length!=t.totalDataNum&&0!=t.datalist.length?(t.pageNum++,t.getInventory(t.searchinfo)):t.$refs.my_scroller.finishInfinite(!0)},500)},getRootCategories:function(){var t=this;l.a.post("http://120.55.124.53:8206/api/product/getRootCategories",{},{headers:{"Content-Type":"application/json",companyId:t.company_id}}).then(function(a){a.data.data.categories_id?t.getSubCategoriesList(a.data.data.categories_id):t.$message({message:"没有获取到根分类！",center:!0,duration:1e3})})},getSubCategoriesList:function(t){var a=this;l.a.post("http://120.55.124.53:8206/api/product/getSubCategoriesList",{categories_id:t},{headers:{"Content-Type":"application/json",companyId:a.company_id}}).then(function(t){if(t.data.data.categoriesModel.length>0){for(var i=0;i<t.data.data.categoriesModel.length;i++)t.data.data.categoriesModel[i].label=t.data.data.categoriesModel[i].name,t.data.data.categoriesModel[i].value=t.data.data.categoriesModel[i].name;a.menu=t.data.data.categoriesModel,a.categories_id=a.menu[0].categories_id}else a.$message({message:"没有获取到子分类！",center:!0,duration:1e3})})},sub:function(t){for(var a=0;a<this.datalist.length;a++)this.datalist[a].id==t&&(this.datalist[a].stockQuantityShow>0?(this.datalist[a].stockQuantity=this.datalist[a].stockQuantity+1,this.datalist[a].stockQuantityShow=this.datalist[a].stockQuantityShow-1):this.$message({message:"数量最小为0！",center:!0,duration:1e3}))},add:function(t){for(var a=0;a<this.datalist.length;a++)this.datalist[a].id==t&&(this.datalist[a].stockQuantity<=0?this.$message({message:"数量不能大于库存数量！",center:!0,duration:1e3}):(this.datalist[a].stockQuantity=this.datalist[a].stockQuantity-1,this.datalist[a].stockQuantityShow=this.datalist[a].stockQuantityShow+1))},changeStatus:function(t,a){for(var i=0;i<this.datalist.length;i++)this.datalist[i].id==a&&(t>this.datalist[i].stockQuantitydata?(this.$message({message:"数量不能大于库存数量！",center:!0,duration:1e3}),this.datalist[i].stockQuantityShow=0):(this.datalist[i].stockQuantity=this.datalist[i].stockQuantitydata-t,this.datalist[i].stockQuantityShow=t))},Inputshow:function(t){for(var a=0;a<this.datalist.length;a++)this.datalist[a].id==t&&(this.datalist[a].isinputShow=!this.datalist[a].isinputShow)},submit:function(){for(var t=[],a=0;a<this.datalist.length;a++)1==this.datalist[a].checked&&t.push(this.datalist[a]);for(var i=0;i<t.length;i++)t[i].stockQuantity=t[i].stockQuantityShow;for(var e=0;e<this.datalist2.length;e++)if(void 0!==this.datalist2[e].filelist&&this.datalist2[e].filelist.length>0)for(var s=0;s<this.datalist2[e].filelist.length;s++)this.datalist2[e].filelist[s]={url:this.datalist2[e].filelist[s],name:s+".jpg"};this.$router.push({path:"/Maintenance",name:"Maintenance",params:{dataObj:t,operator:this.operator,workshop_id:this.workshop_id,company_id:this.company_id,type_name:this.type_name,mac_type_id:this.mac_type_id,flag:this.flag,machine_id:this.machine_id,datalist:this.datalist2}})},cancel:function(){for(var t=0;t<this.datalist2.length;t++)if(console.log(this.datalist2[t].filelist),void 0!==this.datalist2[t].filelist&&this.datalist2[t].filelist.length>0)for(var a=0;a<this.datalist2[t].filelist.length;a++)this.datalist2[t].filelist[a]={url:this.datalist2[t].filelist[a],name:a+".jpg"};this.$router.push({path:"/Maintenance",name:"Maintenance",params:{dataObj2:{type_name:this.type_name,mac_type_id:this.mac_type_id,flag:this.flag},datalist:this.datalist2,machine_id:this.machine_id,operator:this.operator,workshop_id:this.workshop_id,company_id:this.company_id}})}},mounted:function(){this.datalist=[],this.pageNum=1,this.getParams(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)}),this.getInventory()},watch:{searchinfo:function(t,a){""==t&&(this.pageNum=1,this.datalist=[],this.getInventory())}}},Q={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content"},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("保养物料")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"select"},[i("select",{staticClass:"shortselect",attrs:{name:"bbxb",id:"selecte"},on:{change:t.change}},t._l(t.menu,function(a){return i("option",{domProps:{value:a.categories_id}},[t._v(t._s(a.label))])}),0)]),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchinfo,expression:"searchinfo"}],ref:"input1",attrs:{type:"search",placeholder:"输入物料编号，名称，规格等"},domProps:{value:t.searchinfo},on:{keyup:function(a){return a.type.indexOf("key")||13===a.keyCode?t.seachinfo(a):null},input:function(a){a.target.composing||(t.searchinfo=a.target.value)}}}),t._v(" "),i("i",{staticClass:"el-icon-search",staticStyle:{"font-size":"15px"}})]),t._v(" "),i("scroller",{ref:"my_scroller",attrs:{height:"100%",onRefresh:t.refresh,onInfinite:t.inf}},[i("div",{staticStyle:{height:"80%",overflow:"auto"}},t._l(t.datalist,function(a){return i("div",[i("div",{staticClass:"contain",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"check"},[i("el-checkbox",{model:{value:a.checked,callback:function(i){t.$set(a,"checked",i)},expression:"item.checked"}})],1),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-one"},[i("span",[t._v("备品名称:"+t._s(a.name))]),t._v(" "),i("span",[t._v("备品规格:"+t._s(a.specification))])])]),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content-one"},[i("span",[t._v("库存数量:"+t._s(a.stockQuantity))])])])])]),t._v(" "),i("div",{staticClass:"contain"},[i("div",{staticClass:"add"},[i("span",[t._v("数量：")]),t._v(" "),i("div",{staticClass:"input-number"},[i("i",{staticClass:"el-icon-remove",staticStyle:{color:"rgb(255,153,102)"},on:{click:function(i){return t.sub(a.id)}}}),i("span",{directives:[{name:"show",rawName:"v-show",value:!a.isinputShow,expression:"!item.isinputShow"}],on:{click:function(i){return t.Inputshow(a.id)}}},[t._v(t._s(a.stockQuantityShow))]),i("el-input",{directives:[{name:"show",rawName:"v-show",value:a.isinputShow,expression:"item.isinputShow"}],attrs:{size:"small"},on:{change:function(i){t.changeStatus(i,a.id)},blur:function(i){return t.Inputshow(a.id)}},model:{value:a.stockQuantityShow,callback:function(i){t.$set(a,"stockQuantityShow",i)},expression:"item.stockQuantityShow"}}),t._v(" "),i("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"rgb(49,153,102)"},on:{click:function(i){return t.add(a.id)}}})],1)])])])}),0)]),t._v(" "),i("div",{staticClass:"bottom"},[i("div",{staticClass:"submit",on:{click:t.submit}},[i("span",[t._v("提交")])]),t._v(" "),i("div",{staticClass:"cancel",on:{click:t.cancel}},[i("span",[t._v("取消")])])])],1)])},staticRenderFns:[]};var $=i("VU/8")(E,Q,!1,function(t){i("OLfh")},"data-v-1f7614de",null).exports,A={name:"Maintenance",data:function(){var t;return t={dialogVisible:!1,maintain_type_id:"",isClickIn:"",maintainTypeList:[],isclickIn:null,mac_type_id:null,type_name:null,machine_id:null,operator:"",flag:null,company_id:"",limit:5,autoUpload:!0,datalist:[]},D()(t,"company_id",""),D()(t,"workshop_id",""),D()(t,"yes",!0),D()(t,"no",!1),D()(t,"consume_list",[]),t},methods:{isclick:function(){console.log(this.maintain_type_id),this.submit()},change3:function(t){console.log(t),this.maintain_type_id=t.target.value},toadd:function(){console.log(this.operator),console.log(this.datalist);var t={type_name:this.type_name,mac_type_id:this.mac_type_id,flag:this.flag,machine_id:this.machine_id};this.$router.push({path:"/Maintenance_materials",name:"Maintenance_materials",params:{operator:this.operator,dataObj2:t,machine_id:this.machine_id,workshop_id:this.workshop_id,company_id:this.company_id,maintain_type_id:this.maintain_type_id,flag:this.flag,isClickIn:this.isClickIn,datalist:this.datalist}})},back:function(){var t={mac_type_id:this.mac_type_id,workshop_id:this.workshop_id,company_id:this.company_id,machine_id:this.machine_id};console.log(t),this.$router.push({path:"/Maintenance_list",name:"Maintenance_list",params:t})},getParams:function(){if(console.log(this.$route.params),this.company_id=this.$route.params.company_id,this.maintain_type_id=this.$route.params.maintain_type_id,this.isClickIn=this.$route.params.isClickIn,this.workshop_id=this.$route.params.workshop_id,this.operator=this.$route.params.operator,this.datalist=this.$route.params.datalist,this.flag=this.$route.params.flag,this.machine_id=this.$route.params.machine_id,console.log(this.maintain_type_id),console.log(this.isClickIn),"false"==this.isClickIn&&this.getMaintainType(),console.log(this.operator),this.$route.params.dataObj){var t=this.$route.params.dataObj;this.consume_list=t}var a=this;l.a.get("http://106.12.219.66:8763/com-machine-info/selectAMachineRelation",{params:{machineId:a.machine_id},headers:{companyId:a.company_id}}).then(function(t){console.log(t),a.mac_type_id=t.data.data[0].machineType,a.type_name=t.data.data[0].macType.typeName,a.datalist?console.log(a.datalist):a.getMaintain()})},acTiveArrStringFun:function(t){console.log(t);var a=[];if(null!=t&&0!=t.length)for(var i=0;i<t.length;i++)a.push(t[i]);return a.toString()},submit:function(){console.log(this.datalist);for(var t=0;t<this.datalist.length;t++)if(void 0!==this.datalist[t].filelist&&this.datalist[t].filelist.length>0)for(var a=0;a<this.datalist[t].filelist.length;a++)this.datalist[t].filelist[a].url&&(this.datalist[t].filelist[a]=this.datalist[t].filelist[a].url);for(var i,e,s,n=this.maintain_type_id,o={operator:this.operator,machine_id:this.machine_id,mac_type_id:this.mac_type_id,maintain_type_id:n,workshop_id:this.workshop_id},c={company_id:this.company_id},r=this.datalist,d=[],p=0;p<r.length;p++)r[p].filelist&&r[p].filelist.length>0&&(r[p].picture=this.acTiveArrStringFun(r[p].filelist)),i="",e="",s="",r[p].picture&&("undefined"==r[p].picture&&(r[p].picture=""),i=r[p].picture),console.log(r[p].radio),""!=r[p].radio&&("undefined"==r[p].radio&&(r[p].radio=""),1==r[p].radio?e=1:0==r[p].radio&&(e=0)),""!=r[p].input&&("undefined"==r[p].input&&(r[p].input=""),s=r[p].input),d.push({picture:i,tick:e,text:s,maintain_item_id:r[p].id});for(var h=[],m=0;m<this.consume_list.length;m++){var _={product_id:this.consume_list[m].id,product_name:this.consume_list[m].name,specification:this.consume_list[m].specification,quantity:this.consume_list[m].stockQuantity};h.push(_)}var u=this;l.a.post("http://120.55.124.53:8206/api/maintain/submitMaintain",{maintainMainRecord:o,selectInfo:c,maintainList:d,maintainMaterial:h},{headers:{"Content-Type":"application/json"}}).then(function(t){if(console.log(t),"成功"==t.data.message){u.$message({type:"success",message:"更新成功!",center:!0,duration:2e3});var a={mac_type_id:u.mac_type_id,workshop_id:u.workshop_id,company_id:u.company_id,machine_id:u.machine_id};u.$router.push({path:"/Maintenance_list",name:"Maintenance_list",params:a})}else{u.$message.error({message:"更新失败!",center:!0,duration:500});var i={mac_type_id:u.mac_type_id,workshop_id:u.workshop_id,company_id:u.company_id};u.$router.push({path:"/Maintenance_list",name:"Maintenance_list",params:i})}})},deletes:function(t){var a=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var i=0;i<a.consume_list.length;i++)if(a.consume_list[i].id==t){var e=a.consume_list.indexOf(a.consume_list[i]);a.consume_list.splice(e,1)}a.$message({type:"success",message:"删除成功!",center:!0,duration:1e3})}).catch(function(){})},getMaintainType:function(){console.log("das");var t=this;l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainType",{selectInfo:{company_id:t.company_id},maintainType:{mac_type_id:t.mac_type_id}},{headers:{"Content-Type":"application/json",companyId:t.company_id}}).then(function(a){console.log(a);for(var i=[],e=0;e<a.data.result.length;e++)i.push({id:a.data.result[e].id,name:a.data.result[e].name});t.maintainTypeList=i,console.log(t.maintainTypeList)})},linput:function(t,a){for(var i=0;i<this.datalist.length;i++)this.datalist[i].id==a&&(this.datalist[i].input=t)},lradio:function(t,a){for(var i=0;i<this.datalist.length;i++)this.datalist[i].id==a&&(this.datalist[i].radio=t)},handleRemove:function(t,a,i){for(var e="http://120.55.124.53:81"+t.response.result,s=0;s<this.datalist.length;s++)if(this.datalist[s].id==i){var n=this.datalist[s].filelist.indexOf(e);this.datalist[s].filelist.splice(n,1)}},toMany:function(){this.$message.error({message:"图片最多四张！",center:!0,duration:1e3})},uploadError:function(t,a,i){console.log(t),console.log(a),this.$message({message:"上传失败，图片不能大于1Mb！",center:!0,duration:2e3})},handleAvatarSuccess:function(t,a,i,e){var s="http://120.55.124.53:81";console.log(t);for(var n=0;n<this.datalist.length;n++)this.datalist[n].id==e&&(this.datalist[n].filelist?this.datalist[n].filelist[this.datalist[n].filelist.length]=s+a.response.result:(this.datalist[n].filelist=[],this.datalist[n].filelist[0]=s+a.response.result));"成功"!=t.message&&this.$message.error({message:"上传失败，请重新选择图片！",center:!0,duration:1e3})},getMaintain:function(){var t=this;l.a.post("http://120.55.124.53:8206/api/maintain/getMaintain",{mac_type_id:t.mac_type_id},{headers:{"Content-Type":"application/json",companyId:t.company_id}}).then(function(a){if(console.log(a),"fail"!=a.data.result){var i=[];console.log(t.flag);for(var e=0;e<a.data.data.length;e++)if(a.data.data[e].name==t.flag)for(var s=0;s<a.data.data[e].maintainItemList.length;s++)a.data.data[e].maintainItemList[s].index=s+1,a.data.data[e].maintainItemList[s].input="",a.data.data[e].maintainItemList[s].radio="",i.push(a.data.data[e].maintainItemList[s]);t.datalist=i}else t.$message.error({message:a.data.message,center:!0,duration:500})})}},mounted:function(){this.getParams(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},j={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("el-dialog",{attrs:{title:"请选择保养类型",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[i("select",{staticClass:"shortselect3",attrs:{name:"bbxb",id:"selecte"},on:{change:t.change3}},t._l(t.maintainTypeList,function(a){return i("option",{domProps:{value:a.id}},[t._v(t._s(a.name))])}),0),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.submit()}}},[t._v("确 定")])],1)]),t._v(" "),i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("保养")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticClass:"contain"},[i("div",{staticClass:"head"},[i("div",{staticClass:"con",staticStyle:{width:"55%"}},[i("span",[t._v("设备编号："+t._s(t.machine_id))])]),t._v(" "),i("div",{staticClass:"con"},[i("span",[t._v("设备类型："+t._s(t.type_name))])])])]),t._v(" "),i("div",{staticClass:"contain"},[i("div",{staticClass:"head"},[i("div",{staticClass:"con",staticStyle:{width:"55%"}},[i("span",[t._v("保养分类："+t._s(t.flag))])]),t._v(" "),t._m(0)])]),t._v(" "),i("div",{staticStyle:{height:"80%",overflow:"auto",background:"white","margin-top":"5px"}},[t._l(t.datalist,function(a){return i("div",[1==a.confirm?i("div",{staticClass:"contain"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",{staticStyle:{color:"red","font-weight":"700","font-size":"20px","text-align":"center"}},[t._v("*")]),i("span",[t._v(t._s(a.index)+".保养条目："+t._s(a.name))])]),t._v(" "),t._m(1,!0),t._v(" "),i("div",{staticClass:"card-content",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card-con"},[i("el-checkbox",{model:{value:a.radio,callback:function(i){t.$set(a,"radio",i)},expression:"item.radio"}},[t._v("是")])],1)])])]):3==a.confirm?i("div",{staticClass:"contain",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",{staticStyle:{color:"red","font-weight":"700","font-size":"20px","text-align":"center"}},[t._v("*")]),i("span",[t._v(t._s(a.index)+".保养条目："+t._s(a.name))])]),t._v(" "),t._m(2,!0),t._v(" "),i("div",{staticClass:"card-content",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"content-two"},[i("el-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入内容"},on:{input:function(i){t.linput(i,a.id)}},model:{value:a.input,callback:function(i){t.$set(a,"input",i)},expression:"item.input"}})],1)])])]):i("div",{staticClass:"contain",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card2"},[i("div",{staticClass:"card-head"},[i("span",[t._v(t._s(a.index)+".保养条目："+t._s(a.name))]),i("span",{staticStyle:{color:"rgba(0,0,0,0.5)"}},[t._v("(提交现场实际照片)")])]),t._v(" "),t._m(3,!0),t._v(" "),i("div",{staticClass:"contain"},[i("div",{staticClass:"upload"},[i("el-upload",{attrs:{action:"http://120.55.124.53:8206/api/file/fileUpload/maintain",limit:t.limit,"auto-upload":t.autoUpload,"list-type":"picture-card","on-error":t.uploadError,"on-remove":function(i,e){t.handleRemove(i,e,a.id)},accept:"image/*","on-exceed":t.toMany,"file-list":a.filelist,"on-success":function(i,e,s){t.handleAvatarSuccess(i,e,s,a.id)}}},[i("i",{staticClass:"el-icon-plus",attrs:{id:a.index}})])],1)])])])])}),t._v(" "),i("div",{staticClass:"card2",staticStyle:{height:"129px"}},[i("div",{staticClass:"card-head2"},[t._m(4),t._v(" "),i("div",{staticClass:"add_btn",on:{click:t.toadd}},[i("span",[t._v("增加")])])]),t._v(" "),t._m(5),t._v(" "),i("div",{staticStyle:{height:"80%",overflow:"auto"}},t._l(t.consume_list,function(a,e){return i("div",{key:e},[i("div",{staticClass:"contain"},[i("div",{staticClass:"contain-son",staticStyle:{"margin-left":"5px"}},[i("span",[t._v("备品名称："+t._s(a.name))]),t._v(" "),i("span",{staticStyle:{"margin-right":"20px"}},[t._v("备品规格："+t._s(a.specification))])])]),t._v(" "),i("div",{staticClass:"contain"},[i("div",{staticClass:"contain-son",staticStyle:{"margin-left":"5px"}},[i("span",[t._v("备品数量："+t._s(a.stockQuantity))]),t._v(" "),i("div",{staticClass:"del_btn"},[i("i",{staticClass:"el-icon-delete-solid",on:{click:function(i){return t.deletes(a.id)}}})])])]),t._v(" "),i("div",{staticClass:"line",staticStyle:{"margin-top":"5px"}}),t._v(" "),i("div",{staticClass:"line-con"})])}),0)])],2),t._v(" "),i("div",{staticClass:"bottom"},[i("div",{staticClass:"submit",on:{click:function(a){return t.isclick()}}},[i("span",[t._v("提交")])]),t._v(" "),i("div",{staticClass:"cancel",on:{click:t.back}},[i("span",[t._v("取消")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"con"},[a("span")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticStyle:{"margin-left":"5px"}},[a("span",[this._v("消耗物料：")]),a("span",{staticStyle:{color:"rgba(0,0,0,0.5)"}},[this._v("(备品更换使用记录)")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])}]};var z=i("VU/8")(A,j,!1,function(t){i("fVAO"),i("u4MC")},"data-v-1c0f6e9b",null).exports,L={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[this._v(this._s(this.msg))]),this._v(" "),a("h2",[this._v("Essential Links")]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"http://localhost:8080/#/select/018040/1/10000018",target:"_blank"}},[this._v("\n     to select\n      ")])]),this._v(" "),a("li",[a("a",{attrs:{href:"http://192.168.43.119:8080/#/Maintenance/10000018/1/admin/大保养/1175",target:"_blank"}},[this._v("\n     to 保养\n      ")])])])}]};var N=i("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},L,!1,function(t){i("E+6n")},"data-v-12b6f23f",null).exports,P={name:"Maintenance_history_detail",data:function(){return{macRelation:{machine_id:"",workshop_id:""},id:"",selectInfo:{company_id:""},operator:"",dataList:[]}},methods:{back:function(){this.$router.push({path:"/Maintenance_history",name:"Maintenance_history",params:{machine_id:this.macRelation.machine_id,operator:this.operator,workshop_id:this.macRelation.workshop_id,company_id:this.selectInfo.company_id}})},getData:function(){console.log(this.id),this.dataList=[];var t=this;t.dataList=[],l.a.post("http://120.55.124.53:8206/api/maintain/getMaintainDetail",{company_id:t.selectInfo.company_id,id:t.id},{}).then(function(a){if(console.log(a),0!=a.data.result.maintainRecords.length){for(var i=0;i<a.data.result.maintainRecords.length;i++)a.data.result.maintainRecords[i].index=i+1,1==a.data.result.maintainRecords[i].tick?a.data.result.maintainRecords[i].tick=!0:a.data.result.maintainRecords[i].tick=!1,a.data.result.maintainRecords[i].picture=a.data.result.maintainRecords[i].picture.split(","),t.dataList.push(a.data.result.maintainRecords[i]);console.log(t.dataList)}else t.$message({message:"没有数据！",center:!0,duration:2e3})})}},mounted:function(){this.id=this.$route.params.id,this.macRelation.machine_id=this.$route.params.machine_id,this.operator=this.$route.params.operator,this.macRelation.workshop_id=this.$route.params.workshop_id,this.selectInfo.company_id=this.$route.params.company_id,console.log(this.id),this.getData(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},O={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("保养历史记录详情")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticStyle:{height:"92%","margin-top":"4%",overflow:"auto",background:"white"}},t._l(t.dataList,function(a,e){return i("div",{key:e},[1==a.confirm?i("div",{staticClass:"contain"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",{staticStyle:{color:"red","font-weight":"700","font-size":"20px","text-align":"center"}},[t._v("*")]),i("span",[t._v(t._s(a.index)+".保养条目："+t._s(a.maintain_item))])]),t._v(" "),t._m(0,!0),t._v(" "),i("div",{staticClass:"card-content",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card-con"},[i("el-checkbox",{attrs:{disabled:""},model:{value:a.tick,callback:function(i){t.$set(a,"tick",i)},expression:"item.tick"}},[t._v("是")])],1)])])]):3==a.confirm?i("div",{staticClass:"contain",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("span",{staticStyle:{color:"red","font-weight":"700","font-size":"20px","text-align":"center"}},[t._v("*")]),i("span",[t._v(t._s(a.index)+".保养条目："+t._s(a.maintain_item))])]),t._v(" "),t._m(1,!0),t._v(" "),i("div",{staticClass:"card-content",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"content-two"},[i("el-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入内容",disabled:""},on:{input:function(i){t.linput(i,a.id)}},model:{value:a.text,callback:function(i){t.$set(a,"text",i)},expression:"item.text"}})],1)])])]):i("div",{staticClass:"contain",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"card2"},[i("div",{staticClass:"card-head"},[i("span",[t._v(t._s(a.index)+".保养条目："+t._s(a.maintain_item))]),i("span",{staticStyle:{color:"rgba(0,0,0,0.5)"}},[t._v("(提交现场实际照片)")])]),t._v(" "),i("div",{staticClass:"line"},[i("div",{staticClass:"line-con"},t._l(a.picture,function(t,e){return i("el-image",{key:e,staticStyle:{width:"80px",height:"80px",float:"left",margin:"10px"},attrs:{src:t,"preview-src-list":a.picture}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])}),1)]),t._v(" "),i("div",{staticClass:"contain"})])])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])}]};var B=i("VU/8")(P,O,!1,function(t){i("dYlr"),i("+5Pr")},"data-v-141f2888",null).exports,U={name:"choose",data:function(){return{ljShow:!1,szShow:!1,qjShow:!1,staff_id:"",workshop_id:"",days_to_expire:"",machine_id:"",company_id:"",datalist:[],workshop_name:"",operator:""}},methods:{back:function(){this.$router.push({path:"/Maintenance_list",name:"Maintenance_list",params:{operator:this.operator,company_id:this.company_id,staff_id:this.staff_id}})},toMaintenance_list:function(){this.$router.push({path:"/Maintenance_list",name:"Maintenance_list",params:{operator:this.operator,company_id:this.selectInfo.company_id,staff_id:this.staff_id}})},toDetail:function(t,a,i,e,s,n){this.$router.push({path:"/Maintenance",name:"Maintenance",params:{company_id:this.company_id,workshop_id:this.workshop_id,operator:this.operator,flag:i,machine_id:this.machine_id,maintain_type_id:n,isClickIn:"false",mac_type_id:t}})},getData:function(){var t=this;l.a.post("http://120.55.124.53:8206/api/maintain/getMaintain",{mac_type_id:t.mac_type_id},{headers:{companyId:t.company_id}}).then(function(a){console.log(a);for(var i=[],e=0;e<a.data.data.length;e++)a.data.data[e].mac_type_name=a.data.data[e].type_name,a.data.data[e].maintain_type_name=a.data.data[e].name,a.data.data[e].machine_id=t.machine_id,a.data.data[e].workshop_id=t.workshop_id,a.data.data[e].maintain_type_id=a.data.data[e].id,i.push(a.data.data[e]);t.datalist=i})}},mounted:function(){this.machine_id=this.$route.params.machine_id,this.company_id=this.$route.params.company_id,this.operator=this.$route.params.operator,this.staff_id=this.$route.params.staff_id,this.mac_type_id=this.$route.params.mac_type_id,this.days_to_expire=this.$route.params.days_to_expire,this.workshop_id=this.$route.params.workshop_id,this.workshop_name=this.$route.params.workshop_name,this.getData(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},J={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content",staticStyle:{"padding-top":"10px"}},[i("span",{staticStyle:{"font-size":"1rem","font-weight":"bold","margin-bottom":"-1rem"}},[t._v("选择")]),t._v(" "),i("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"fixed",left:"17px",top:"13px"},on:{click:t.back}}),t._v(" "),i("div",{staticClass:"all-page"},[i("div",{staticStyle:{height:"90%",overflow:"auto"}},t._l(t.datalist,function(a){return i("div",{staticClass:"contain",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"card",on:{click:function(i){return t.toDetail(a.mac_type_id,a.mac_type_name,a.maintain_type_name,a.machine_id,a.workshop_id,a.maintain_type_id)}}},[i("div",{staticClass:"card-head"},[i("div",[i("span",[t._v(t._s(t.workshop_name))]),i("span",[t._v("上次保养时间："+t._s(a.maintain_time))])]),i("span",{staticClass:"no-deal"},[t._v("待处理")])]),t._v(" "),t._m(0,!0),t._v(" "),i("div",{staticClass:"card-content2",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"content-two",staticStyle:{"justify-content":"space-between"}},[i("span",[t._v("设备编号："+t._s(a.machine_id))]),t._v(" "),i("span",[t._v("设备类型："+t._s(a.mac_type_name))])])]),t._v(" "),i("div",{staticClass:"card-content2"},[i("div",{staticClass:"content-two"},[i("span",[t._v("保养类别："+t._s(a.maintain_type_name))])])]),t._v(" "),i("div",{staticClass:"card-content2"},[i("div",{staticClass:"content-two"},[i("span",[t._v("到期时间："+t._s(a.expire_time))])])])])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"line"},[a("div",{staticClass:"line-con"})])}]};var F=i("VU/8")(U,J,!1,function(t){i("Oh0b")},"data-v-1e9c867b",null).exports,W={name:"App",data:function(){return{beamName:"",warpingOpen:!1,companyId:"",beamType:"",staffName:"",actionName:"",realYield:"",updateTime:"",beamTraceDTOList:[],beamTypeNum:null,dialogVisible:!1,selectOption:[],lmWarpPlanDetails:[],lmWarpPlanDetailslist:[],jslist:[],jsMoreSpan:"",jsMoreShow:!1,lmZjwarpPlanDetailDTOS:[],lmZjwarpPlanDetailDTOSlist:[],zjlist:[],zjMoreSpan:"",zjMoreShow:!1}},methods:{selectChange:function(t){console.log(t),this.beamTypeNum=t},sure:function(){null==this.beamTypeNum||""==this.beamTypeNum?this.$message.error({message:"请选择一个轴类型!",center:!0,duration:1e3}):(this.dialogVisible=!1,this.getBegin())},jsMoreClick:function(){"更多浆纱"==this.jsMoreSpan?(this.jslist=this.lmWarpPlanDetailslist,this.jsMoreSpan="收起"):"收起"==this.jsMoreSpan&&(this.jsMoreSpan="更多浆纱",this.jslist=this.lmWarpPlanDetails)},zjMoreClick:function(){"更多整经"==this.zjMoreSpan?(this.zjlist=this.lmZjwarpPlanDetailDTOSlist,this.zjMoreSpan="收起"):"收起"==this.zjMoreSpan&&(this.zjMoreSpan="更多整经",this.zjlist=this.lmZjwarpPlanDetailDTOS)},getInfo:function(){var t=this;l.a.get("http://106.12.219.66:8763/warp-axis-record/selectByBeam?beamName="+t.beamName,{headers:{companyId:t.companyId}}).then(function(a){if(console.log(a),0==a.data.data.length)t.$message.error({message:a.data.successMessage,center:!0,duration:1e3});else if(1==a.data.data.length)t.beamTypeNum=a.data.data[0].beamType,t.getBegin();else{t.dialogVisible=!0;for(var i=0;i<a.data.data.length;i++)1==a.data.data[i].beamType?a.data.data[i].beam="整经轴":2==a.data.data[i].beamType&&(a.data.data[i].beam="织轴"),t.selectOption.push(a.data.data[i])}})},getBegin:function(){var t=this;l.a.get("http://106.12.219.66:8763/lm-run-product-shift/beamProductTrace?beamName="+t.beamName+"&beamType="+t.beamTypeNum,{headers:{companyId:t.companyId}}).then(function(a){console.log(a),t.beamName=a.data.data.warpAxisRecord.beamName,t.staffName=a.data.data.warpAxisRecord.staffName,t.actionName=a.data.data.warpAxisRecord.actionName,t.realYield=a.data.data.warpAxisRecord.realYield,t.updateTime=a.data.data.warpAxisRecord.updateTime;for(var i=0;i<a.data.data.beamTraceDTOList.length;i++){if(a.data.data.beamTraceDTOList[i].lmZjwarpPlanDetailDTOS.length>0?a.data.data.beamTraceDTOList[i].zjflag=!0:a.data.data.beamTraceDTOList[i].zjflag=!1,a.data.data.beamTraceDTOList[i].lmRunProductShifts.length>0?a.data.data.beamTraceDTOList[i].zbflag=!0:a.data.data.beamTraceDTOList[i].zbflag=!1,a.data.data.beamTraceDTOList[i].lmWarpPlanBWithOrderSheetDTO.lmWarpPlanDetails.length>0?a.data.data.beamTraceDTOList[i].jsflag=!0:a.data.data.beamTraceDTOList[i].jsflag=!1,a.data.data.beamTraceDTOList[i].lmRunProductShifts.length>0)for(var e=0;e<a.data.data.beamTraceDTOList[i].lmRunProductShifts.length;e++)a.data.data.beamTraceDTOList[i].lmRunProductShifts[e].clothLengthMeter=a.data.data.beamTraceDTOList[i].lmRunProductShifts[e].clothLengthMeter/10;if(a.data.data.beamTraceDTOList[i].lmWarpPlanBWithOrderSheetDTO.lmWarpPlanDetails.length>0)for(var s=0;s<a.data.data.beamTraceDTOList[i].lmWarpPlanBWithOrderSheetDTO.lmWarpPlanDetails.length;s++){var n=a.data.data.beamTraceDTOList[i].lmWarpPlanBWithOrderSheetDTO.lmWarpPlanDetails[s];n.axisNo==t.beamName&&t.lmWarpPlanDetails.push(n),n.workQty2=t.isnull(n.workQty2),n.workQty3=t.isnull(n.workQty3),n.workQty1=t.isnull(n.workQty1);var o=parseInt(n.workQty1)+parseInt(n.workQty2)+parseInt(n.workQty3);n.cl=o,t.lmWarpPlanDetailslist.push(n)}if(a.data.data.beamTraceDTOList[i].lmZjwarpPlanDetailDTOS.length>0)for(var c=0;c<a.data.data.beamTraceDTOList[i].lmZjwarpPlanDetailDTOS.length;c++){var l=a.data.data.beamTraceDTOList[i].lmZjwarpPlanDetailDTOS[c];l.axisNo==t.beamName&&t.lmZjwarpPlanDetailDTOS.push(l),l.workQty2=t.isnull(l.workQty2),l.workQty3=t.isnull(l.workQty3),l.workQty1=t.isnull(l.workQty1),l.empName1=t.addChar(l.empName1),l.empName2=t.addChar(l.empName2);var r=parseInt(l.workQty1)+parseInt(l.workQty2)+parseInt(l.workQty3);a.data.data.beamTraceDTOList[i].lmZjwarpPlanDetailDTOS[c].cl=r,t.lmZjwarpPlanDetailDTOSlist.push(a.data.data.beamTraceDTOList[i].lmZjwarpPlanDetailDTOS[c])}}2==a.data.data.warpAxisRecord.beamType?(t.beamType="织轴",t.jsMoreShow=!0,t.zjMoreShow=!1,t.jsMoreSpan="更多浆纱",t.jslist=t.lmWarpPlanDetails,t.zjlist=t.lmZjwarpPlanDetailDTOSlist):1==a.data.data.warpAxisRecord.beamType&&(t.zjlist=t.lmZjwarpPlanDetailDTOS,t.beamType="整经轴",t.jsMoreShow=!1,t.zjMoreSpan="更多整经",t.zjMoreShow=!0,t.jslist=t.lmWarpPlanDetailslist),t.beamTraceDTOList=a.data.data.beamTraceDTOList})},isnull:function(t){return null==t?0:t},addChar:function(t){return null==t?"":t+","}},mounted:function(){this.beamName=this.$route.params.beamName,this.companyId=this.$route.params.companyId,this.getInfo(),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){history.pushState(null,null,window.location.href)})}},Z={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticStyle:{"background-color":"white",overflow:"auto",height:"700px"}},[i("div",{staticStyle:{"font-size":"20px",border:"white 5px solid",display:"flex","justify-content":"flex-start","text-align":"left"}},[t._v("轴追溯\n  ")]),t._v(" "),i("div",{staticStyle:{"font-size":"20px",border:"white 5px solid",display:"flex","justify-content":"flex-start","text-align":"left"}},[i("div",[i("div",{staticClass:"one"},[i("span",[t._v("轴类：")]),t._v(" "),i("span",[t._v(t._s(t.beamType))])]),t._v(" "),i("div",{staticClass:"one"},[i("span",[t._v("轴号：")]),t._v(" "),i("span",[t._v(t._s(t.beamName))])]),t._v(" "),i("div",{staticClass:"one"},[i("span",[t._v("最近事件：")]),t._v(" "),i("span",[t._v(t._s(t.actionName))])]),t._v(" "),i("div",{staticClass:"one"},[i("span",[t._v("员工：")]),t._v(" "),i("span",[t._v(t._s(t.staffName))])]),t._v(" "),i("div",{staticClass:"one"},[i("span",[t._v("产量：")]),t._v(" "),i("span",[t._v(t._s(t.realYield))])]),t._v(" "),i("div",{staticClass:"one"},[i("span",[t._v("时间：")]),t._v(" "),i("span",[t._v(t._s(t.updateTime))])])])]),t._v(" "),t._l(t.beamTraceDTOList,function(a,e){return i("div",{key:e,staticClass:"tableBorder"},[a.zjflag?i("div",[i("el-divider",{staticStyle:{"background-color":"#f2f3f2"},attrs:{"content-position":"left"}},[i("span",{staticStyle:{"font-size":"20px",color:"red"}},[t._v("整经")])]),t._v(" "),t._l(t.zjlist,function(a,e){return i("div",{key:e,staticClass:"tableBorder"},[i("div",{staticClass:"tableInside"},[t._m(0,!0),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("轴号:")]),t._v(" "),i("span",[t._v(t._s(a.axisNo))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("产量:")]),t._v(" "),i("span",[t._v(t._s(a.cl)+"米")])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("操作人:")]),t._v(" "),i("span",[t._v(t._s(a.empName1)+t._s(a.empName2)+t._s(a.empName3))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("机台号:")]),t._v(" "),i("span",[t._v(t._s(a.axisInfo.machineId))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("完成时间:"+t._s(a.endDate))]),t._v(" "),i("span")])])])}),t._v(" "),t.zjMoreShow?i("div",{staticClass:"right"},[i("span",{on:{click:t.zjMoreClick}},[t._v(t._s(t.zjMoreSpan))])]):t._e()],2):t._e(),t._v(" "),a.jsflag?i("div",[i("el-divider",{staticStyle:{"background-color":"#f2f3f2"},attrs:{"content-position":"left"}},[i("span",{staticStyle:{"font-size":"20px",color:"red"}},[t._v("浆纱详情")])]),t._v(" "),t._l(t.jslist,function(e,s){return i("div",{key:s,staticClass:"tableBorder"},[i("div",{staticClass:"left"},[i("span",[t._v("轴号:")]),t._v(" "),i("span",[t._v(t._s(e.axisNo))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("生产产量:")]),t._v(" "),i("span",[t._v(t._s(e.cl)+"米")])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("合轴数:")]),t._v(" "),i("span",[t._v(t._s(a.lmWarpPlanBWithOrderSheetDTO.axialNumber))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("机台号:")]),t._v(" "),i("span",[t._v(t._s(a.lmWarpPlanBWithOrderSheetDTO.machineId))])])])}),t._v(" "),t.jsMoreShow?i("div",{staticClass:"right"},[i("span",{on:{click:t.jsMoreClick}},[t._v(t._s(t.jsMoreSpan))])]):t._e()],2):t._e(),t._v(" "),a.zbflag?i("div",[i("el-divider",{staticStyle:{"background-color":"#f2f3f2"},attrs:{"content-position":"left"}},[i("span",{staticStyle:{"font-size":"20px",color:"red",width:"100%",height:"100%","background-color":"#f2f3f2"}},[t._v("织布")])]),t._v(" "),t._l(a.lmRunProductShifts,function(a,e){return i("div",{key:e,staticClass:"tableBorder"},[i("div",{staticClass:"left"},[i("span",[t._v("轴号:")]),t._v(" "),i("span",[t._v(t._s(a.beamName))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("生产产量:")]),t._v(" "),i("span",[t._v(t._s(a.clothLengthMeter)+"米")])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("落布时间:")]),t._v(" "),i("span",[t._v(t._s(a.updateTime))])]),t._v(" "),i("div",{staticClass:"left"},[i("span",[t._v("机台号:")]),t._v(" "),i("span",[t._v(t._s(a.machineID))])])])})],2):t._e()])}),t._v(" "),i("el-dialog",{attrs:{title:"请选择轴类型",visible:t.dialogVisible,width:"80%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a}}},[t._l(t.selectOption,function(a,e){return i("el-radio",{key:e,staticStyle:{width:"36%"},attrs:{label:a.beamType},on:{change:t.selectChange},model:{value:t.beamTypeNum,callback:function(a){t.beamTypeNum=a},expression:"beamTypeNum"}},[t._v(t._s(a.beamName)+"("+t._s(a.beam)+")")])}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.sure}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.sure()}}},[t._v("确 定")])],1)],2)],2)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"titleTop"},[a("span")])}]};var V=i("VU/8")(W,Z,!1,function(t){i("wxDZ")},null,null).exports;e.default.use(o.a);var G=new o.a({routes:[{path:"/Axistrace/:beamName/:companyId",name:"Axistrace",component:V},{path:"/",name:"hello",component:N},{path:"/select/:machine_id/:company_id",name:"select",component:p},{path:"/Maintenance_details",name:"Maintenance_details",component:f},{path:"/Maintenance_list/:company_id/:operator",name:"Maintenance_list",component:T},{path:"/choose/:machine_id/:company_id/:operator/:staff_id/:mac_type_id/:days_to_expire/:workshop_id",name:"choose",component:F},{path:"/ToMaintenance_list/:company_id/:operator/:staff_id",name:"ToMaintenance_list",component:k},{path:"/Maintenance_history/:company_id/:operator",name:"Maintenance_history",component:I},{path:"/Maintenance_materials",name:"Maintenance_materials",component:$},{path:"/Maintenance/:company_id/:workshop_id/:operator/:flag/:machine_id/:maintain_type_id/:isClickIn",name:"Maintenance",component:z},{path:"/Maintenance_history_detail",name:"Maintenance_history_detail",component:B},{path:"/Component_consumption_details",name:"Component_consumption_details",component:y}]}),Y=i("zL8q"),q=i.n(Y);i("tvR6");e.default.use(m.a),e.default.config.productionTip=!1,e.default.use(q.a),new e.default({el:"#app",router:G,components:{App:n},template:"<App/>"})},OLfh:function(t,a){},Oh0b:function(t,a){},VwSf:function(t,a){t.exports="data:image/png;base64,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"},XDzH:function(t,a){},dYlr:function(t,a){},fVAO:function(t,a){},"lG+y":function(t,a){},lQIc:function(t,a){},"o1+I":function(t,a){},tvR6:function(t,a){},u4MC:function(t,a){},uTfA:function(t,a){},wxDZ:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.7e68aa4f096a8f484de4.js.map