webpackJsonp([1],{"/uab":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"lang",function(){return i});var i={chanliangtuyi:"Output Graph",factoryName:["Plant One","Plant Two","Plant Three","Plant Four"],factory:[{value:"1",label:"Plant One"},{value:"2",label:"Plant Two"},{value:"3",label:"Plant Three"},{value:"4",label:"Plant Four"}],tingjishebei:"Shutdown Device",shengchanjvjiao:"Monitoring",zongchanlaingduibi:"Total Output Comparison",problemOptions:[{value:"4",label:"High Efficiency Device"},{value:"5",label:"High Output Device"},{value:"1",label:"Low Efficiency Device"},{value:"2",label:"Low Output Device"},{value:"3",label:"Low Broken Ends Device"}],jingshatingche:"Warp Stop",weishatingche:"Weft Stop",qitatingche:"Else Stop",xiaolvzuigao:"Efficiency: Max",pingjun:"Average",kaijixiaolv:" Boot Efficiency",chanliang:"Output",liaojiyuce:"Warpout Forecast",dangqianliaoji:"Current Warpout",yujingtuisong:"Warning Push",shebeihao:"Device No.",yuceshijian:"Prediction Time",chixushijian:"Duration",shengyujingzhouchang:"Residual Beam Length",shijian:"Time",leibie:"Type",miaoshu:"Description",zongchanliang:"Total Output",xishuchanliang:"Coefficient Output",mi:"m",zongchanliangduibi:["Yday's Coefficient","Tday's Coefficient","Yesterday","Today"],warpTitle:"Warp",sizingTitle:"Sizing",stop:"stop",run:"run",dangriduantou:"break",shedingjingchang:"set value",dangqiangjingchang:"current",pinzhong:"variety",shedingshachang:"set value",dangqianshachang:"current",shebeibianhao:"NO",shebeizhuangtai:"status",toufen:"firstPart",zhouhao:"AxisNo",chesu:"speed",shangwendu:"temperature up",xiawendu:"temperature down",caotongwendu:"slotted drum",hongtongdianliu:"drying drum"}},"0Pck":function(t,e,a){t.exports=a.p+"static/media/alarm.cf5f81e.mp3"},"74w4":function(t,e){window.apiRoot={api_board:"http://120.55.124.53:7070"}},DSM5:function(t,e){},GfYG:function(t,e){},IfBd:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),o=a("zL8q"),n=a.n(o),s=(a("tvR6"),a("74w4"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("audio",{attrs:{src:"",id:"eventAudio",preload:"auto"}}),this._v(" "),e("router-view"),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom_font"},[e("span",[this._v("Copyright © 浙江天衡信息技术有限公司")])])}]});var r=a("VU/8")({name:"app",data:function(){return{companyId:this.$route.params.id}},methods:{},mounted:function(){},components:{}},s,!1,function(t){a("GfYG")},null,null).exports,l=a("/ocq"),d=a("bOdI"),c=a.n(d),h=a("Gu7T"),p=a.n(h),u=a("mtWM"),m=a.n(u);function f(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a)if(new RegExp("("+i+")").test(e)){var o=a[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:g(o))}return e}function g(t){return("00"+t).substr(t.length)}var y={name:"productMonitor",data:function(){return{sumjs:null,mincurrentShiftOutput:null,maxcurrentShiftOutput:null,shiftDate:[],currentShiftOutput:[],dialogFormVisible_zj:!1,zj_choseItem:"周数据",dialogFormVisible_js:!1,js_choseItem:"周数据",dialogFormVisible_zz:!1,zz_choseItem:"周数据",dialogFormVisible_yb:!1,yb_choseItem:"周数据",dialogFormVisible_wx:!1,wx_choseItem:"全部",dialogFormVisible_xl:!1,xl_choseItem:"效率优秀",dialogFormVisible_kt:!1,kt_choseItem:"1",dialogFormVisible_cl:!1,cl_choseItem:"1",wxList:[],xlyxList:[],zjList:[],jsList:[],zxt_data:[],zxt_data2:[],zxt_data3:[],zxt_data4:[],maxChartEfficiency2:"",minChartEfficiency2:"",lang:"zh",workshopId:"",src2:"",workshopList:[],chartWorkshopList:[],dialogFormVisible:!1,deviceHeight:"",deviceWidth:"",date:new Date,url:window.apiRoot.api_board,companyId:this.$route.params.id,buttonName:"zh-CN",zongchanlaingduibi:!0,chanliangtuyi:!0,warp_page:!0,sizing_page:!1,warpDetail_page:!1,sizingDetail_page:!1,currentLength:2900,totalLength:4500,tableData:[],lioajiData:[],lioajiIngData:[],activeName:"first",warp:[],warp1:{},warp2:{},warp3:{},warp4:{},sizing:[],sizing1:{},sizing2:{},sizingDetail:{},machineId:"",productMonths:[],totalProductSeries:[],problemOptions:[{value:"4",label:"效率优秀设备"},{value:"5",label:"产量优秀设备"},{value:"1",label:"效率落后设备"},{value:"2",label:"产量落后设备"},{value:"3",label:"断头落后设备"}],problemDefaultValue:"4",maxEfficiency:"95",avgEfficiency:"89",machineEfficiency:[{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""},{machineNum:"",openEfficiency:""}],machineChanliangb:[{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""},{machineNum:"",chanliangb:""}],unusualStop:[],yesProducton:[],yesProductonXs:[],todProduction:[],todProductionXs:[],sumTodProduction:"",sumTodProductionXs:"",maxChartEfficiency:"",minChartEfficiency:"",sumzz:[],sumzj:[],sumyb:[],jsumyb:0}},methods:{tozj:function(){this.$router.push({path:"/zj/"+this.companyId+"/"+this.workshopId})},tozz:function(){this.$router.push({path:"/zz/"+this.companyId+"/"+this.workshopId})},toyb:function(){this.$router.push({path:"/yb",name:"yb",params:{id:this.companyId,workshopid:this.workshopId,jsumyb:this.jsumyb}})},tojs:function(){this.$router.push({path:"/js/"+this.companyId+"/"+this.workshopId})},chose:function(t,e){if("zj"==t)this.dialogFormVisible_zj=!1,this.zj_choseItem=e,this.zjEchart();else if("js"==t)this.dialogFormVisible_js=!1,this.js_choseItem=e,this.jsEchart();else if("zz"==t)this.dialogFormVisible_zz=!1,this.zz_choseItem=e,this.getYieldAnalysisNew();else if("yb"==t)this.dialogFormVisible_yb=!1,this.yb_choseItem=e,this.ybEchart();else if("wx"==t){this.dialogFormVisible_wx=!1,this.wx_choseItem=e;var a=[];if("全部"==e)this.wxList=this.wxList2;else{for(var i=0;i<this.wxList2.length;i++)this.wxList2[i].status==e&&a.push(this.wxList2[i]);this.wxList=a}}else if("xl"==t)if(this.dialogFormVisible_xl=!1,this.xl_choseItem=e,"效率优秀"==e){var o=this;m()({url:"http://120.55.124.53:7070/s/getEfficiency",method:"post",headers:{"Content-Type":"application/json",companyId:o.companyId},data:{problemId:"4",workshopId:o.workshopId}}).then(function(t){for(var e=[],a=0;a<t.data.data.list.length;a++)e.push(t.data.data.list[a]);for(var i=[],n=(e=o.sortByKey(e,"e24hEfficiencyF")).length-1;n>=0;n--)i.push(e[n]);o.xlyxList=i}).then(function(){})}else{var n=this;m()({url:"http://120.55.124.53:7070/s/getEfficiency",method:"post",headers:{"Content-Type":"application/json",companyId:n.companyId},data:{problemId:"1",workshopId:n.workshopId}}).then(function(t){for(var e=[],a=0;a<t.data.data.list.length;a++)e.push(t.data.data.list[a]);for(var i=[],o=(e=n.sortByKey(e,"e24hEfficiencyF")).length-1;o>=0;o--)i.push(e[o]);n.xlyxList=i}).then(function(){})}else if("kt"==t){this.dialogFormVisible_kt=!1,this.kt_choseItem=e;var s=this;s.pzktsList=[],s.NameList=[];var r=s.getYesterday(parseInt(s.kt_choseItem)),l=s.getNowday();m()({url:"http://120.55.124.53:7070/app/getTypeInfo",method:"post",headers:{"Content-Type":"application/json",companyId:s.companyId},data:{order:"openMachineNum",startDate:r,endDate:l,limitNum:5}}).then(function(t){for(var e=0;e<t.data.data.length;e++){s.NameList.push(t.data.data[e].styleName);var a={value:t.data.data[e].openMachineNum,name:t.data.data[e].styleName};s.pzktsList.push(a)}s.ktEchart()}).then(function(){})}else if("cl"==t){this.dialogFormVisible_cl=!1,this.cl_choseItem=e;var d=this;d.pzclList=[],d.NameList=[];var c=d.getYesterday(parseInt(d.cl_choseItem)),h=d.getNowday();m()({url:"http://120.55.124.53:7070/app/getTypeInfo",method:"post",headers:{"Content-Type":"application/json",companyId:d.companyId},data:{order:"productMeter",startDate:c,endDate:h,limitNum:5}}).then(function(t){for(var e=0;e<t.data.data.length;e++){d.NameList.push(t.data.data[e].styleName);var a={value:t.data.data[e].productMeter,name:t.data.data[e].styleName};d.pzclList.push(a)}d.clEchart()}).then(function(){})}},getDate2:function(){var t=this;"效率优秀"==t.xl_choseItem?m()({url:"http://120.55.124.53:7070/s/getEfficiency",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{problemId:"4",workshopId:t.workshopId}}).then(function(e){for(var a=[],i=0;i<e.data.data.list.length;i++)a.push(e.data.data.list[i]);for(var o=[],n=(a=t.sortByKey(a,"e24hEfficiencyF")).length-1;n>=0;n--)o.push(a[n]);t.xlyxList=o}).then(function(){}):"效率落后"==t.xl_choseItem&&m()({url:"http://120.55.124.53:7070/s/getEfficiency",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{problemId:"1",workshopId:t.workshopId}}).then(function(e){for(var a=[],i=0;i<e.data.data.list.length;i++)a.push(e.data.data.list[i]);for(var o=[],n=(a=t.sortByKey(a,"e24hEfficiencyF")).length-1;n>=0;n--)o.push(a[n]);t.xlyxList=o}).then(function(){}),m()({url:"http://120.55.124.53:7070/app/getMachineRepairBoard",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{workshopId:t.workshopId,groupId:null}}).then(function(e){for(var a=e.data.data.data,i=[],o=0;o<a.length;o++)a[o].times=(t.TimeDifference(a[o].submitDate,t.formatDate(t.date))/60).toFixed(2),"已完成"==a[o].status?(a[o].times=(t.TimeDifference(a[o].getOrderDate,a[o].repairedDate)/60).toFixed(2),a[o].status="已维修",a[o].color="color:rgb(109, 212, 0)"):"未处理"==a[o].status?(a[o].status="待修",a[o].color="color:rgb(247, 181, 0)"):"处理中"==a[o].status&&(a[o].status="修机",a[o].color="color:rgb(247, 181, 0)"),i.push(a[o]);t.wxList=i,t.wxList2=i}).then(function(){}),t.getTypeInfo(),t.getYieldAnalysisNew()},getTypeInfo:function(){var t=this.getYesterday(1),e=this;e.NameList=[],e.pzktsList=[],e.pzclList=[],m()({url:"http://120.55.124.53:7070/app/getTypeInfo",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{order:"productMeter",startDate:t,endDate:e.getNowday(),limitNum:5}}).then(function(t){for(var a=0;a<t.data.data.length;a++){e.NameList.push(t.data.data[a].styleName);var i={value:t.data.data[a].productMeter,name:t.data.data[a].styleName};e.pzclList.push(i)}e.clEchart()}).then(function(){})},getYieldAnalysisNew:function(){var t=this,e=this;m()({url:"http://120.55.124.53:7070/sign2/getYieldAnalysisNew",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{workshopIds:null,workshopArray:[e.workshopId]}}).then(function(a){if(e.zzclName=[],e.zzclList=[],a.data.data.length>0){for(var i=0;i<a.data.data[0].yieldAnalysisList2.length;i++){var o=String(a.data.data[0].yieldAnalysisList2[i].months);a.data.data[0].yieldAnalysisList2[i].months=o.slice(5),a.data.data[0].yieldAnalysisList2[i].totalProductMeterXs<1e3?a.data.data[0].yieldAnalysisList2[i].totalProductMeterXs=(a.data.data[0].yieldAnalysisList2[i].totalProductMeterXs/1e3).toFixed(2):a.data.data[0].yieldAnalysisList2[i].totalProductMeterXs=(a.data.data[0].yieldAnalysisList2[i].totalProductMeterXs/1e3).toFixed(0),e.zzclName.push(a.data.data[0].yieldAnalysisList2[i].months),e.zzclList.push(a.data.data[0].yieldAnalysisList2[i].totalProductMeterXs)}e.maxzzclList=Math.max.apply(Math,p()(e.zzclList))+.2,e.minzzclList=Math.min.apply(Math,p()(e.zzclList))-.2,e.zzEchart()}else{t.$echarts.init(document.getElementById("zz_echart")).clear()}}).then(function(){}),2==e.workshopId?m()({url:"http://120.55.124.53:7070/warpingHis/selectWeekYield",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{workshops:"2,3"}}).then(function(t){for(var a=[],i=[],o=t.data.data.length-1;o>=0;o--)t.data.data[o].shiftDate=t.data.data[o].shiftDate.slice(5),i.push((t.data.data[o].currentShiftOutput/1e3).toFixed(0)),a.push(t.data.data[o].shiftDate);e.maxcurrentShiftOutput=Math.max.apply(Math,i)+.2,e.mincurrentShiftOutput=Math.min.apply(Math,i)-.2,e.shiftDate=a,e.currentShiftOutput=i,e.zjEchart()}):m()({url:"http://120.55.124.53:7070/warpingHis/selectWeekYield",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{workshops:e.workshopId}}).then(function(t){for(var a=[],i=[],o=t.data.data.length-1;o>=0;o--)t.data.data[o].shiftDate=t.data.data[o].shiftDate.slice(5),i.push((t.data.data[o].currentShiftOutput/1e3).toFixed(0)),a.push(t.data.data[o].shiftDate);e.maxcurrentShiftOutput=Math.max.apply(Math,i)+.2,e.mincurrentShiftOutput=Math.min.apply(Math,i)-.2,e.shiftDate=a,e.currentShiftOutput=i,e.zjEchart()})},getNowday:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),i=t.getDate();(a+=1)<10&&(a="0"+a),i<10&&(i="0"+i);return e+"-"+a+"-"+i},getYesterday:function(t){var e=(new Date).getTime()-864e5*t,a=new Date(e);a.getMonth(),a.getDate();return a=a.getFullYear()+"-"+(a.getMonth()>9?a.getMonth()+1:"0"+(a.getMonth()+1))+"-"+(a.getDate()>9?a.getDate():"0"+a.getDate())},zjEchart:function(){var t=this.$echarts.init(document.getElementById("zj_echart"));t.clear();var e={xAxis:{type:"category",axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},data:this.shiftDate},yAxis:{axisLine:{lineStyle:{color:"#fff"}},axisLabel:{formatter:"{value}Km"},max:this.maxcurrentShiftOutput,min:0,splitLine:{show:!1},type:"value"},grid:{left:"3%",right:"4%",bottom:"0",top:"18%",containLabel:!0},series:[{data:this.currentShiftOutput,type:"bar",itemStyle:{normal:{color:function(t){return["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622"][t.dataIndex]},label:{show:!0,position:"top",textStyle:{color:"white",fontSize:12}}}}}]};t.setOption(e),window.addEventListener("resize",function(){t.resize()})},jsEchart:function(){var t=this.$echarts.init(document.getElementById("js_echart"));t.clear();t.setOption({xAxis:{type:"category",axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},data:["07-30","07-31","08-01","08-02","08-03","08-04","08-05"]},yAxis:{axisLine:{lineStyle:{color:"#fff"}},axisLabel:{formatter:"{value}Km"},max:602,min:0,splitLine:{show:!1},type:"value"},grid:{left:"3%",right:"4%",bottom:"0",top:"18%",containLabel:!0},series:[{data:[320,300,350,380,370,334,340],type:"bar",itemStyle:{normal:{color:function(t){return["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622"][t.dataIndex]},label:{show:!0,position:"top",textStyle:{color:"white",fontSize:12}}}}}]}),window.addEventListener("resize",function(){t.resize()})},zzEchart:function(){var t=this.$echarts.init(document.getElementById("zz_echart"));t.clear();var e={xAxis:{type:"category",axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},data:this.zzclName},yAxis:{axisLine:{lineStyle:{color:"#fff"}},axisLabel:{formatter:"{value}Km"},splitLine:{show:!1},max:this.maxzzclList,min:0,type:"value"},grid:{left:"3%",right:"4%",bottom:"0",top:"18%",containLabel:!0},series:[{data:this.zzclList,type:"bar",itemStyle:{normal:{color:function(t){return["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622"][t.dataIndex]},label:{show:!0,position:"top",textStyle:{color:"white",fontSize:12}}}}}]};t.setOption(e),window.addEventListener("resize",function(){t.resize()})},ybEchart:function(){var t=this.$echarts.init(document.getElementById("yb_echart"));t.clear();t.setOption({xAxis:{type:"category",axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},data:["07-30","07-31","08-01","08-02","08-03","08-04","08-05"]},yAxis:{axisLine:{lineStyle:{color:"#fff"}},axisLabel:{formatter:"{value}Km"},splitLine:{show:!1},type:"value"},grid:{left:"3%",right:"4%",bottom:"0",top:"18%",containLabel:!0},series:[{data:[620,600,650,680,670,610,630],type:"bar",itemStyle:{normal:{color:function(t){return["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622"][t.dataIndex]},label:{show:!0,position:"top",textStyle:{color:"white",fontSize:12}}}}}]}),window.addEventListener("resize",function(){t.resize()})},ktEchart:function(){var t=this.$echarts.init(document.getElementById("xj_echart"));t.clear();var e={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",right:"0%",top:"10%",textStyle:{color:"#fff",fontSize:15},data:this.NameList},labelLine:{show:!1},series:[{name:"访问来源",type:"pie",radius:"80%",center:["30%","50%"],data:this.pzktsList,label:{normal:{show:!1,position:"inside",formatter:"{b}:{d}%"}}}]};t.setOption(e),window.addEventListener("resize",function(){t.resize()})},clEchart:function(){var t,e=this.$echarts.init(document.getElementById("yj_echart"));e.clear();for(var a=0,i=0;i<this.pzclList.length;i++)a+=this.pzclList[i].value;var o={tooltip:{trigger:"item",formatter:function(t){for(x in t)return null}},legend:{selectedMode:!1,type:"scroll",orient:"vertical",right:30,top:"20%",textStyle:{fontSize:20,color:"white"},data:this.NameList},graphic:[{type:"text",left:"30%",top:"45%",style:{text:"品种总产量",textAlign:"center",color:"#fff",fill:"#fff",width:30,height:30,fontSize:18}},{type:"text",left:"33%",top:"52%",style:{text:a,textAlign:"center",fill:"#FFF70D",width:30,height:30,fontSize:18,color:"#39F1FF",fontFamily:"Microsoft YaHei"}}],series:[(t={name:"访问来源",type:"pie",label:{position:"center",formatter:"12个",fontSize:20},radius:["40%","60%"],center:["38%","50%"],avoidLabelOverlap:!1},c()(t,"label",{show:!1,position:"center"}),c()(t,"emphasis",{label:{show:!0,fontSize:"30",fontWeight:"bold"}}),c()(t,"labelLine",{show:!1}),c()(t,"data",this.pzclList),t)]};e.setOption(o),window.addEventListener("resize",function(){e.resize()})},getStartRatesYMD:function(t){var e=this;2==t?m()({url:"http://120.55.124.53:7070/weight/getEffDay?workshopId=2",method:"get",headers:{"Content-Type":"application/json",companyId:e.companyId}}).then(function(t){var a=[],i=[],o=[];e.zxt_data=[],e.zxt_data2=[];for(var n=0;n<t.data.data[0].selectList.length-1;n++)a.push(t.data.data[0].selectList[n]);for(var s=0;s<10;s++)i.push(a[s]);for(var r=i.length-1;r>i.length-11;r--)o.push(i[r]);for(var l=0;l<10;l++)e.zxt_data.push((100*o[l].efficiency).toFixed(1)),o[l].date=o[l].date.replace(/-/g,"/").slice(5),e.zxt_data2.push(o[l].date);e.maxChartEfficiency=Math.max.apply(Math,p()(e.zxt_data))+.2,e.minChartEfficiency=Math.min.apply(Math,p()(e.zxt_data))-.2,e.maxChartEfficiency>100&&(e.maxChartEfficiency=100)}).then(function(){m()({url:"http://120.55.124.53:7070/weight/getEffDay?workshopId=3",method:"get",headers:{"Content-Type":"application/json",companyId:e.companyId}}).then(function(t){var a=[],i=[],o=[];e.zxt_data3=[],e.zxt_data4=[];for(var n=0;n<t.data.data[0].selectList.length-1;n++)a.push(t.data.data[0].selectList[n]);for(var s=0;s<10;s++)i.push(a[s]);for(var r=i.length-1;r>i.length-11;r--)o.push(i[r]);for(var l=0;l<10;l++)e.zxt_data3.push((100*o[l].efficiency).toFixed(1)),o[l].date=o[l].date.replace(/-/g,"/").slice(5),e.zxt_data4.push(o[l].date);e.maxChartEfficiency2=Math.max.apply(Math,p()(e.zxt_data3))+.2,e.minChartEfficiency2=Math.min.apply(Math,p()(e.zxt_data3))-.2,e.maxChartEfficiency2>100&&(e.maxChartEfficiency2=100),e.maxChartEfficiency2>e.maxChartEfficiency&&(e.maxChartEfficiency=e.maxChartEfficiency2),e.minChartEfficiency2<e.minChartEfficiency&&(e.minChartEfficiency=e.minChartEfficiency2)}).then(function(){e.zhexian()})}):m()({url:"http://120.55.124.53:7070/weight/getEffDay?workshopId="+t,method:"get",headers:{"Content-Type":"application/json",companyId:e.companyId}}).then(function(t){var a=[],i=[],o=[];e.zxt_data=[],e.zxt_data2=[];for(var n=0;n<t.data.data[0].selectList.length-1;n++)a.push(t.data.data[0].selectList[n]);for(var s=0;s<10;s++)i.push(a[s]);for(var r=i.length-1;r>i.length-11;r--)o.push(i[r]);for(var l=0;l<10;l++)e.zxt_data.push((100*o[l].efficiency).toFixed(1)),o[l].date=o[l].date.replace(/-/g,"/").slice(5),e.zxt_data2.push(o[l].date);e.maxChartEfficiency=Math.max.apply(Math,p()(e.zxt_data))+.2,e.minChartEfficiency=Math.min.apply(Math,p()(e.zxt_data))-.2,e.maxChartEfficiency>100&&(e.maxChartEfficiency=100)}).then(function(){e.zhexian()})},getZhengjing:function(t){var e=this,a=this;2==t?(a.zjList=[],m()({url:"http://120.55.124.53:7070/warping/getZhengJing?workshopId="+t,method:"get",headers:{"Content-Type":"application/json",companyId:a.companyId}}).then(function(t){for(var i=0;i<t.data.data.length;i++)t.data.data[i].duantou=t.data.data[i].numberBrokenEnds,t.data.data[i].currentLength=(t.data.data[i].currentLength/1e3).toFixed(2),0==t.data.data[i].currentLength?t.data.data[i].zwcd=0:(t.data.data[i].zwcd=t.data.data[i].currentLength/t.data.data[i].settingLength*100,t.data.data[i].zwcd=1*t.data.data[i].zwcd.toFixed(1)),t.data.data[i].settingSpeed<=0||t.data.data[i].currentSpeed<=0?t.data.data[i].flag=!1:t.data.data[i].flag=!0,t.data.data[i].zwcd==1/0&&(t.data.data[i].zwcd=0),a.zjList.push(t.data.data[i]),a.zjList=e.sortByKey(a.zjList,"machineId")}).then(function(){m()({url:"http://120.55.124.53:7070/warping/getZhengJing?workshopId="+a.workshopId,method:"get",headers:{"Content-Type":"application/json",companyId:a.companyId}}).then(function(t){for(var i=0;i<t.data.data.length;i++)t.data.data[i].duantou=t.data.data[i].numberBrokenEnds,t.data.data[i].currentLength=(t.data.data[i].currentLength/1e3).toFixed(2),0==t.data.data[i].currentLength?t.data.data[i].zwcd=0:(t.data.data[i].zwcd=t.data.data[i].currentLength/t.data.data[i].settingLength*100,t.data.data[i].zwcd=1*t.data.data[i].zwcd.toFixed(1)),t.data.data[i].settingSpeed<=0||t.data.data[i].currentSpeed<=0?t.data.data[i].flag=!1:t.data.data[i].flag=!0,t.data.data[i].zwcd==1/0&&(t.data.data[i].zwcd=0),a.zjList.push(t.data.data[i]),a.zjList=e.sortByKey(a.zjList,"machineId")}).then(function(){})})):(a.zjList=[],m()({url:"http://120.55.124.53:7070/warping/getZhengJing?workshopId="+t,method:"get",headers:{"Content-Type":"application/json",companyId:a.companyId}}).then(function(t){for(var i=0;i<t.data.data.length;i++)t.data.data[i].duantou=t.data.data[i].numberBrokenEnds,t.data.data[i].currentLength=(t.data.data[i].currentLength/1e3).toFixed(2),0==t.data.data[i].currentLength?t.data.data[i].zwcd=0:(t.data.data[i].zwcd=t.data.data[i].currentLength/t.data.data[i].settingLength*100,t.data.data[i].zwcd=1*t.data.data[i].zwcd.toFixed(1)),t.data.data[i].settingSpeed<=0||t.data.data[i].currentSpeed<=0?t.data.data[i].flag=!1:t.data.data[i].flag=!0,t.data.data[i].zwcd==1/0&&(t.data.data[i].zwcd=0),a.zjList.push(t.data.data[i]);a.zjList=e.sortByKey(a.zjList,"machineId")}).then(function(){}))},getJiangsha:function(t){var e=this,a=this;2==t?(a.jsList=[],m()({url:"http://120.55.124.53:7070/warping/getJiangSha?workshopId="+t,method:"get",headers:{"Content-Type":"application/json",companyId:a.companyId}}).then(function(t){for(var e=0;e<t.data.data.length;e++)t.data.data[e].zwcd=1*(t.data.data[e].db175/t.data.data[e].db1297*100).toFixed(1),t.data.data[e].db175/t.data.data[e].db1297==1/0&&(t.data.data[e].zwcd=0),t.data.data[e].zwcd>=100&&(t.data.data[e].zwcd=100),t.data.data[e].db175=parseFloat(t.data.data[e].db175).toFixed(1),parseInt(t.data.data[e].db152)<=0?t.data.data[e].flag=!1:t.data.data[e].flag=!0,a.jsList.push(t.data.data[e])}).then(function(){m()({url:"http://120.55.124.53:7070/warping/getJiangSha?workshopId="+a.workshopId,method:"get",headers:{"Content-Type":"application/json",companyId:a.companyId}}).then(function(t){for(var i=0;i<t.data.data.length;i++)t.data.data[i].zwcd=1*(t.data.data[i].db175/t.data.data[i].db1297*100).toFixed(1),t.data.data[i].db175/t.data.data[i].db1297==1/0&&(t.data.data[i].zwcd=0),t.data.data[i].zwcd>=100&&(t.data.data[i].zwcd=100),t.data.data[i].db175=parseFloat(t.data.data[i].db175).toFixed(1),parseInt(t.data.data[i].db152)<=0?t.data.data[i].flag=!1:t.data.data[i].flag=!0,a.jsList.push(t.data.data[i]);a.jsList=e.sortByKey(a.jsList,"machineId")}).then(function(){})})):(a.jsList=[],m()({url:"http://120.55.124.53:7070/warping/getJiangSha?workshopId="+t,method:"get",headers:{"Content-Type":"application/json",companyId:a.companyId}}).then(function(t){for(var e=0;e<t.data.data.length;e++)t.data.data[e].zwcd=1*(t.data.data[e].db175/t.data.data[e].db1297*100).toFixed(1),t.data.data[e].db175/t.data.data[e].db1297==1/0&&(t.data.data[e].zwcd=0),t.data.data[e].zwcd>=100&&(t.data.data[e].zwcd=100),t.data.data[e].db175=parseFloat(t.data.data[e].db175).toFixed(1),parseInt(t.data.data[e].db152)<=0?t.data.data[e].flag=!1:t.data.data[e].flag=!0,a.jsList.push(t.data.data[e])}).then(function(){}))},zhexian:function(){var t=this.$echarts.init(document.getElementById("zx_echart"));t.clear();var e=null;e=2==this.workshopId?{color:["#c23531","#d48265"],tooltip:{trigger:"axis",show:!0},legend:{data:["二分厂","三分厂"],textStyle:{color:"white",fontSize:15},right:"5%",top:"5%"},grid:{top:"10%",right:"5%",left:"8%",bottom:"10%"},xAxis:{type:"category",boundaryGap:!1,data:this.zxt_data2,axisLine:{lineStyle:{color:"#fff"}}},yAxis:{type:"value",show:!0,min:this.minChartEfficiency,max:this.maxChartEfficiency,axisLine:{lineStyle:{color:"#fff"}}},series:[{name:"二分厂",type:"line",smooth:!0,data:this.zxt_data},{name:"三分厂",type:"line",smooth:!0,data:this.zxt_data3}]}:{color:["#c23531","#2f4554"],tooltip:{trigger:"axis",show:!0},grid:{top:"10%",right:"5%",left:"8%",bottom:"10%"},xAxis:{type:"category",axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},boundaryGap:!1,data:this.zxt_data2},yAxis:{type:"value",show:!0,min:this.minChartEfficiency,max:this.maxChartEfficiency,axisLine:{lineStyle:{color:"#fff"}}},series:{name:"效率",type:"line",data:this.zxt_data,smooth:!0}},t.setOption(e),window.addEventListener("resize",function(){t.resize()})},switchZCLAndCLTY:function(t){"zcldb"===t&&(this.zongchanlaingduibi=!0,this.chanliangtuyi=!1),"clty"===t&&(this.zongchanlaingduibi=!1,this.chanliangtuyi=!0),"warp"===t&&(this.warp_page=!0,this.sizing_page=!1),"sizing"===t&&(this.warp_page=!1,this.sizing_page=!0)},tableRowStyle4:function(t){t.row,t.rowIndex;return"font-size:1rem;text-align:center;border:0;"},tableHeaderColor4:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"color:#b0e9f3;font-size:0.4rem;font-weight: bolder;text-align:center;border-bottom:2px solid lightblue;margin:0;padding:0"},tableCellStyle4:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"color:#b0e9f3;text-align:center;font-weight:bolder;font-size:1rem;border:0;"},tableCellStyleyujing:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"color:orange;text-align:center;font-weight:bolder;font-size:1rem;border:0;":"color:#b0e9f3;text-align:center;font-weight:bolder;font-size:1rem;border:0;"},getIframe1:function(){this.src2="http://47.110.95.57/mulanTP2.3/index.php/home/index/qxTv?CompanyId="+this.companyId+"&workshopId="+this.workshopId+"&paddingLeft=13&language="+this.lang},getWarpSpeed:function(t){var e="";this.warp.forEach(function(a){a.machineId===t&&(e=a.currentSpeed)});var a=this.$echarts.init(document.getElementById("warpSpeedChart"+t));a.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}km/h"},title:{text:"当前速度",left:"32%",top:"40%",textStyle:{color:"#fff",fontSize:8}},series:[{name:"业务指标",type:"gauge",min:0,max:5e3,center:["55%","35%"],detail:{formatter:"{value} km/h",top:"80%",fontSize:10,color:"#fff",offsetCenter:[0,"80%"]},data:[{value:e}],radius:"75%",splitLine:{length:15,lineStyle:{color:"auto"}},axisLine:{lineStyle:{width:10}},axisLabel:{show:!1,fontSize:5,color:"#fff"},pointer:{width:5,shadowColor:"#fff",shadowBlur:5}}]}),window.addEventListener("resize",function(){a.resize()})},getProductionTime:function(){var t=this.$echarts.init(document.getElementById("ProductionTimeCharts"));t.clear(),t.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#ffffff"}}},legend:{data:this.chartWorkshopList,textStyle:{fontSize:16,color:"lightblue"},top:"5%",left:"15%"},grid:{x:70,x2:150,y2:30,left:"10%",top:"23%",bottom:"20%"},xAxis:{type:"category",data:this.productMonths,axisLabel:{show:!0,textStyle:{fontSize:14,color:"lightblue",lineHeight:20}}},yAxis:{name:this.$t("lang.mi"),nameTextStyle:{color:"lightblue",fontSize:16},type:"value",axisLabel:{show:!0,textStyle:{fontSize:10,color:"lightblue"}}},series:this.totalProductSeries}),window.addEventListener("resize",function(){t.resize()})},sortByKey:function(t,e){return t.sort(function(t,a){var i=t[e],o=a[e];return i<o?-1:i>o?1:0})},sortArr:function(t){return t.sort(function(t,e){return t<e?-1:t>e?1:0})},getProductionTimeData:function(){var t,e=this;t=this.workshopList.map(function(t){return t.value}),m()({url:this.url+"/sign2/getYieldAnalysisNew",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{workshopIds:null,workshopArray:t}}).then(function(t){var a=t.data.data;a.length>0&&(e.productMonths=a[0].yieldAnalysisList2.map(function(t){return e.dateFormatForMMdd(t.months)}),e.chartWorkshopList=a.map(function(t){return t.workshopName}),e.totalProductSeries=a.map(function(t){return{name:t.workshopName,data:t.yieldAnalysisList2.map(function(t){return t.totalProductMeterXs}),type:"bar"}}))}).then(function(){e.getProductionTime()})},getProblemsFocusData:function(){var t=this;m()({url:this.url+"/s/getEfficiency",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{problemId:this.problemDefaultValue,workshopId:this.workshopId}}).then(function(e){if(t.maxEfficiency=e.data.data.MAXEff,t.avgEfficiency=e.data.data.AVGEff,"1"===t.problemDefaultValue){var a=e.data.data.list;t.machineEfficiency=a.map(function(t){return{machineNum:t.machineid,openEfficiency:t.shiftEfficiencyF}})}else if("2"===t.problemDefaultValue){var i=e.data.data.list;t.machineChanliangb=i.map(function(t){return{machineNum:t.machineid,chanliangb:t.chanliangb}})}else if("5"===t.problemDefaultValue){var o=e.data.data.list;t.machineChanliangb=o.map(function(t){return{machineNum:t.machineid,chanliangb:t.chanliangb}})}else if("4"===t.problemDefaultValue){var n=e.data.data.list;t.machineEfficiency=n.map(function(t){return{machineNum:t.machineid,openEfficiency:t.shiftEfficiencyF}})}})},getzjSum:function(){var t="";t=2==this.workshopId?"http://120.55.124.53:7070/warping/getZhengJing?workshops=2,3":"http://120.55.124.53:7070/warping/getZhengJing?workshops=1";var e=this;m()({url:t,method:"get",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{}}).then(function(t){for(var a=0,i=0;i<t.data.data.length;i++)a+=t.data.data[i].currentShiftOutput;e.sumzj=e.numbertoString(a)})},numbertoString:function(t){for(var e=t.toString().split("").map(Number),a=[],i=0;i<e.length;i++)a.push({num:e[i]});return a},getjsSum:function(){var t=this;m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{tableName:"sizing_view",query:{workshop_id:t.workshopId}}}).then(function(e){for(var a=0,i=0;i<e.data.data.length;i++)a+=e.data.data[i].current_shift_output;t.sumjs=t.numbertoString(a)})},getzzSum:function(){var t="";t=2==this.workshopId?"http://120.55.124.53:7070/ab/getMultiWorkshopABAndYield?workshops='2','3'":"http://120.55.124.53:7070/ab/getMultiWorkshopABAndYield?workshops='1'";var e=this;m()({url:t,method:"get",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{}}).then(function(t){e.sumzz=e.numbertoString(t.data.data.totalYieldXs),e.sumyb=e.numbertoString(parseInt(parseInt(t.data.data.totalYieldXs)+5e3)+e.getRandomInt(50,100)),e.jsumyb=parseInt(parseInt(t.data.data.totalYieldXs)+5e3)+e.getRandomInt(50,100)})},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getWorkShopList:function(){var t=this;m()({url:"http://120.55.124.53:8211/workShop/getWorkShopList",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{page:1,pageSize:100}}).then(function(e){for(var a=[],i=0;i<e.data.data.length;i++)3!=e.data.data[i].id&&a.push({label:e.data.data[i].name,value:e.data.data[i].id});t.workshopList=a,t.workshopId=t.workshopList[0].value,t.$route.params.workshop_id&&(t.workshopId=t.$route.params.workshop_id)}).then(function(){t.getIframe1(),t.getzjSum(),t.getzzSum(),t.getjsSum(),t.getechart(),t.getechart2()})},TimeDifference:function(t,e){if(t>e)return alert("开始时间不能大于结束时间！"),!1;var a=t.substr(0,10).split("-"),i=e.substr(0,10).split("-"),o=new Date(a[1]+-+a[2]+-+a[0]),n=new Date(i[1]+-+i[2]+-+i[0]),s=parseInt(Math.abs(n-o)/1e3/60),r=60*parseInt(t.substr(11,2))+parseInt(t.substr(14,2));return s+(60*parseInt(e.substr(11,2))+parseInt(e.substr(14,2))-r)},formatDate:function(t){return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getWarningPushDataTiming:function(){var t=this,e=setInterval(function(){t.getzjSum(),t.getzzSum(),t.getechart(),t.getjsSum(),t.getechart2()},15e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})},choseFactory:function(t){this.workshopId=t,window.document.getElementById("dialog").click("dialogFormVisible = false"),this.src2=[],this.src2="http://47.110.95.57/mulanTP2.3/index.php/home/index/qxTv?CompanyId="+this.companyId+"&workshopId="+this.workshopId+"&paddingLeft=13&language="+this.lang,this.zxt_data=[],this.zxt_data2=[],this.getzjSum(),this.getzzSum(),this.getechart()},changeProblems:function(t){this.machineEfficiency=[],this.machineChanliangb=[],this.getProblemsFocusData()},handleClick:function(){},dateFormatForMMdd:function(t){var e=new Date(t);return(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")},getechart2:function(){var t=this,e=this,a=[],i=[];m()({url:"http://120.55.124.53:7070/warpingHis/selectWeekYield",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{workshops:e.workshopId}}).then(function(t){for(var e=t.data.data.length-1;e>=0;e--)t.data.data[e].shiftDate=t.data.data[e].shiftDate.slice(5),i.push((t.data.data[e].currentShiftOutput/1e3).toFixed(0)),a.push(t.data.data[e].shiftDate)}).then(function(){var o=[],n=[];m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"looplist_info",query:{workshop_id:e.workshopId,name:"整经车间"}}}).then(function(s){for(var r=(new Date).getFullYear(),l=0;l<a.length;l++)o.push(r+"-"+a[l]);for(var d=0;d<s.data.data.length;d++)for(var c=function(r){m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"electric_history_d",query:{looplistId:s.data.data[d].id},selectLikeFields:{startTime:o[r]}}}).then(function(e){if(0==e.data.data.length?n[r]=0:n[r]=parseInt(e.data.data[0].electric),n.length==a.length){var o=t.$echarts.init(document.getElementById("echart3"));o.clear();for(var s=[],l=0;l<a.length;l++){var d=i[l]/n[l];0==isFinite(d)&&(d=0),s.push(d.toFixed(2))}o.setOption({color:["#00CE1B","#0099FF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["产量","电量"],textStyle:{color:"#FFFFFF",fontSize:10},right:60,top:5,itemWidth:18,itemHeight:10},grid:{left:"0%",right:"-3%",top:"30%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:a,nameTextStyle:{color:"#FFFFFF",fontSize:10},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"产量/Km",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}},{type:"value",name:"能源/Kwh",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}},{type:"value",name:"利用率",lineStyle:{color:"red"},show:!1,nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}}],series:[{name:"产量",type:"bar",data:i,yAxisIndex:0,barWidth:"20%"},{name:"电量",type:"bar",data:n,yAxisIndex:1,barWidth:"20%"},{name:"利用率",type:"line",lineStyle:{color:"red"},data:s,yAxisIndex:2}]}),window.addEventListener("resize",function(){o.resize()})}})},h=0;h<o.length;h++)c(h)}).then(function(){setTimeout(function(){},1500)})});var o=[],n=[];m()({url:"http://120.55.124.53:7070/sign2/getYieldAnalysisNew",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{workshopIds:null,workshopArray:[e.workshopId]}}).then(function(t){for(var e=0;e<t.data.data[0].yieldAnalysisList2.length;e++){var a=String(t.data.data[0].yieldAnalysisList2[e].months);t.data.data[0].yieldAnalysisList2[e].months=a.slice(5),t.data.data[0].yieldAnalysisList2[e].totalProductMeterXs<1e3?t.data.data[0].yieldAnalysisList2[e].totalProductMeterXs=(t.data.data[0].yieldAnalysisList2[e].totalProductMeterXs/1e3).toFixed(2):t.data.data[0].yieldAnalysisList2[e].totalProductMeterXs=(t.data.data[0].yieldAnalysisList2[e].totalProductMeterXs/1e3).toFixed(0),o.push(t.data.data[0].yieldAnalysisList2[e].months),n.push(t.data.data[0].yieldAnalysisList2[e].totalProductMeterXs)}Math.max.apply(Math,n)+.2,Math.min.apply(Math,n)-.2}).then(function(){var a=[],i=[];m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"looplist_info",query:{workshop_id:e.workshopId,name:"织造车间"}}}).then(function(t){for(var n=(new Date).getFullYear(),s=0;s<o.length;s++)a.push(n+"-"+o[s]);for(var r=0;r<t.data.data.length;r++)for(var l=function(n){m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"electric_history_d",query:{looplistId:t.data.data[r].id},selectLikeFields:{startTime:a[n]}}}).then(function(t){0==t.data.data.length?i[n]=0:i[n]=parseInt(t.data.data[0].electric),i.length,o.length})},d=0;d<a.length;d++)l(d)}).then(function(){setTimeout(function(){var e=t.$echarts.init(document.getElementById("echart5"));e.clear();for(var a=[],s=0;s<o.length;s++){var r=n[s]/i[s];0==isFinite(r)&&(r=0),a.push(r.toFixed(2))}e.setOption({color:["#00CE1B","#0099FF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["产量"],textStyle:{color:"#FFFFFF",fontSize:10},right:60,top:5,itemWidth:18,itemHeight:10},grid:{left:"0%",right:"10%",top:"30%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:o,nameTextStyle:{color:"#FFFFFF",fontSize:10},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"产量/Km",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}}],series:[{name:"产量",type:"bar",data:n,yAxisIndex:0,barWidth:"30%"}]}),window.addEventListener("resize",function(){e.resize()})},1500)})});for(var s=e.getDateArr(6),r=[],l=s.length-1;l>=0;l--)r.push(s[l]);var d=[],c=[];m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"looplist_info",query:{workshop_id:e.workshopId,name:"浆纱车间"}}}).then(function(a){for(var i=(new Date).getFullYear(),o=0;o<r.length;o++)d.push(i+"-"+r[o]);for(var n=0;n<a.data.data.length;n++)for(var s=function(i){m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"electric_history_d",query:{looplistId:a.data.data[n].id},selectLikeFields:{startTime:d[i]}}}).then(function(e){if(0==e.data.data.length?c[i]=0:c[i]=parseInt(e.data.data[0].electric),r.length==c.length){var a=t.$echarts.init(document.getElementById("echart4"));a.clear();for(var o=[],n=[12e3,12100,16e3,17e3,17e3,18e3],s=0;s<r.length;s++){var l=n[s]/c[s];0==isFinite(l)&&(l=0),o.push(l.toFixed(2))}a.setOption({color:["#00CE1B","#0099FF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["产量","电量"],textStyle:{color:"#FFFFFF",fontSize:10},right:30,top:5,itemWidth:18,itemHeight:10},grid:{left:"0%",right:"-13%",top:"30%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:r,nameTextStyle:{color:"#FFFFFF",fontSize:10},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"产量/Km",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}},{type:"value",name:"能源/Kwh",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}},{type:"value",name:"利用率",show:!1,nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}}],series:[{name:"产量",type:"bar",data:n,yAxisIndex:0,barWidth:"25%"},{name:"电量",type:"bar",yAxisIndex:1,data:c,barWidth:"25%"},{name:"利用率",type:"line",yAxisIndex:2,lineStyle:{color:"red"},data:c}]}),window.addEventListener("resize",function(){a.resize()})}})},l=0;l<d.length;l++)s(l)}).then(function(){});var h=[],p=[];m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"looplist_info",query:{workshop_id:e.workshopId},selectLikeFields:{name:"成品"}}}).then(function(a){for(var i=(new Date).getFullYear(),o=0;o<r.length;o++)h.push(i+"-"+r[o]);for(var n=0;n<a.data.data.length;n++)for(var s=function(i){m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"electric_history_d",query:{looplistId:a.data.data[n].id},selectLikeFields:{startTime:d[i]}}}).then(function(e){if(0==e.data.data.length)p[i]=0;else for(var a=0;a<e.data.data.length;a++)-1!=e.data.data[a].startTime.indexOf(d[i])&&(p[i]=parseInt(e.data.data[a].electric));if(p.length==r.length){var o=t.$echarts.init(document.getElementById("echart6"));o.clear();for(var n=[],s=[17400,17100,16900,16800,17e3,17500],l=0;l<r.length;l++){var c=s[l]/p[l];0==isFinite(c)&&(c=0),n.push(c.toFixed(2))}o.setOption({color:["#00CE1B","#0099FF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["产量","电量"],textStyle:{color:"#FFFFFF",fontSize:10},right:30,top:5,itemWidth:18,itemHeight:10},grid:{left:"0%",right:"-8%",top:"30%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:r,nameTextStyle:{color:"#FFFFFF",fontSize:10},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"产量/Km",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}},{type:"value",name:"能源/Kwh",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}},{type:"value",name:"利用率",show:!1,nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}}],series:[{name:"产量",type:"bar",data:s,yAxisIndex:0,barWidth:"25%"},{name:"电量",type:"bar",yAxisIndex:1,data:p,barWidth:"25%"},{name:"利用率",type:"line",yAxisIndex:2,lineStyle:{color:"red"},data:n}]}),window.addEventListener("resize",function(){o.resize()})}})},l=0;l<h.length;l++)s(l)}).then(function(){})},getechart:function(){var t=this,e=this,a=void 0,i=e.workshopId;2==i&&(i=3),m()({url:"http://120.55.124.53:7070/app/getStartRate",method:"post",headers:{"Content-Type":"application/json"},data:{companyId:e.companyId,workshopId:i}}).then(function(t){a=t.data.data.startRate}).then(function(){var e,i=t.$echarts.init(document.getElementById("echart2"));i.clear(),i.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}km/h"},title:{text:"",left:"32%",top:"40%",textStyle:{color:"#fff",fontSize:8}},animation:!1,series:[(e={name:"速度",type:"gauge",min:0,max:100,center:["55%","50%"],splitNumber:5,detail:{formatter:"{value} %",top:"50%",fontSize:12,color:"#fff",offsetCenter:[0,"80%"]},data:[{value:a.toFixed(1)}]},c()(e,"detail",{formatter:"{value}%",textStyle:{fontSize:14},offsetCenter:[0,"80%"]}),c()(e,"radius","80%"),c()(e,"splitLine",{length:15,lineStyle:{color:"#45c9e2"}}),c()(e,"axisTick",{show:!0}),c()(e,"axisLine",{lineStyle:{width:10,color:[[.2,"#ef4200"],[.8,"#45c9e2"],[1,"#00d505"]]}}),c()(e,"axisLabel",{show:!0,fontSize:10,color:"#fff"}),c()(e,"pointer",{width:5,shadowColor:"#fff",shadowBlur:5}),e)]}),window.addEventListener("resize",function(){i.resize()})});var o=[],n=[],s=[];m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"lm_shift_his",sort:"DESC",sortColumn:"ShiftDate",selectFields:["ShiftWork","sum(product_meter)","ShiftDate"],groupByColumn:["ShiftDate"],query:{ShiftWork:0},pageNum:1,pageSize:6}}).then(function(t){for(var a=0;a<t.data.data.length;a++)t.data.data[a].ShiftDate=e.addDate(t.data.data[a].ShiftDate).substr(5,5),t.data.data[a]["sum(product_meter)"]=parseInt(t.data.data[a]["sum(product_meter)"]/10),n.push(t.data.data[a]["sum(product_meter)"]),o.push(t.data.data[a].ShiftDate)}).then(function(){m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:e.companyId},data:{tableName:"lm_shift_his",sort:"DESC",sortColumn:"ShiftDate",selectFields:["ShiftWork","sum(product_meter)","ShiftDate"],groupByColumn:["ShiftDate"],query:{ShiftWork:1},pageNum:1,pageSize:6}}).then(function(t){for(var a=0;a<t.data.data.length;a++)t.data.data[a].ShiftDate=e.addDate(t.data.data[a].ShiftDate).substr(5,5),t.data.data[a]["sum(product_meter)"]=parseInt(t.data.data[a]["sum(product_meter)"]/10),s.push(t.data.data[a]["sum(product_meter)"])}).then(function(){for(var e=[],a=[],i=[],r=o.length-1;r>=0;r--)e.push(o[r]);for(var l=n.length-1;l>=0;l--)a.push(n[l]);for(var d=s.length-1;d>=0;d--)i.push(s[d]);var c=t.$echarts.init(document.getElementById("echart1"));c.clear(),c.setOption({color:["#FF6F00","#FFEE00"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["A班","B班"],textStyle:{color:"#FFFFFF",fontSize:10},right:10,top:5},animation:!1,grid:{left:"8%",right:"4%",top:"25%",bottom:"5%",containLabel:!0},xAxis:[{type:"category",data:e,nameTextStyle:{color:"#FFFFFF",fontSize:10},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"产量/米",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!1,lineStyle:{type:"solid",color:"rgba(84,84,84,1)"}},nameLocation:"end",axisLine:{lineStyle:{color:"#707070",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#AAAAAA",fontSize:10}}}],series:[{name:"A班",type:"bar",data:a,barWidth:"25%"},{name:"B班",type:"bar",barWidth:"25%",data:i}]}),window.addEventListener("resize",function(){c.resize()})})})},getDateArr:function(t){var e=new Date;e.setTime(e.getTime()-864e5);for(var a=[],i=0;i<t;i++){var o=24*i*60*60*1e3,n=e.getTime(),s=new Date(n-o),r=(s.getFullYear(),s.getMonth()+1),l=s.getDate();1==r.toString().length&&(r="0"+r),1==l.toString().length&&(l="0"+l);var d=r+"-"+l;a.push(d)}return a},addDate:function(t){Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};for(var a in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var e=Date.parse(new Date(t));return e/=1e3,e+=86400,new Date(1e3*e).format("yyyy-MM-dd hh:mm:ss")}},filters:{formatDate:function(t){return f(new Date(t),"yyyy-MM-dd hh:mm:ss")}},mounted:function(){var t=this;this.timer=setInterval(function(){t.date=new Date},1e3),this.getWorkShopList(),this.getWarningPushDataTiming()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content4"},[a("header",[a("div",{staticClass:"title"},[t._v("七星纺织智能制造数据看板")]),t._v(" "),a("h1",{staticClass:"tip"},[t._l(t.workshopList,function(e){return e.value==t.workshopId?a("a",{staticStyle:{"margin-left":"23%",cursor:"pointer"},attrs:{id:"xinhai"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v(t._s(e.label))]):t._e()}),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},t._l(t.workshopList,function(e){return a("el-button",{key:e.value,staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(a){return t.choseFactory(e.value)}}},[t._v(t._s(e.label)+"\n        ")])}),1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_zj},on:{"update:visible":function(e){t.dialogFormVisible_zj=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("zj","周数据")}}},[t._v("周数据\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("zj","月数据")}}},[t._v("月数据\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_js},on:{"update:visible":function(e){t.dialogFormVisible_js=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("js","周数据")}}},[t._v("周数据\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("js","月数据")}}},[t._v("月数据\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_zz},on:{"update:visible":function(e){t.dialogFormVisible_zz=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("zz","周数据")}}},[t._v("周数据\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("zz","月数据")}}},[t._v("月数据\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_yb},on:{"update:visible":function(e){t.dialogFormVisible_yb=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("yb","周数据")}}},[t._v("周数据\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("yb","月数据")}}},[t._v("月数据\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_wx},on:{"update:visible":function(e){t.dialogFormVisible_wx=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("wx","全部")}}},[t._v("全部\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("wx","待修")}}},[t._v("待修\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("wx","修机")}}},[t._v("修机\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("wx","已维修")}}},[t._v("已维修\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_xl},on:{"update:visible":function(e){t.dialogFormVisible_xl=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("xl","效率优秀")}}},[t._v("效率优秀\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("xl","效率落后")}}},[t._v("效率落后\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_kt},on:{"update:visible":function(e){t.dialogFormVisible_kt=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("kt","1")}}},[t._v("1\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("kt","7")}}},[t._v("7\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("kt","30")}}},[t._v("30\n        ")])],1),t._v(" "),a("el-dialog",{attrs:{id:"dialog",center:"",width:"22%",modal:!1,visible:t.dialogFormVisible_cl},on:{"update:visible":function(e){t.dialogFormVisible_cl=e}}},[a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("cl","1")}}},[t._v("1\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("cl","7")}}},[t._v("7\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"4rem",width:"100%",margin:"0","font-weight":"bolder","font-size":"1.8rem","border-radius":"10px","background-color":"#61abeb",color:"white"},on:{click:function(e){return t.chose("cl","30")}}},[t._v("30\n        ")])],1),t._v(" "),a("span",{staticStyle:{float:"right","margin-right":"19.5%"}},[t._v(t._s(t._f("formatDate")(t.date))+" ")])],2)]),t._v(" "),a("el-row",{staticStyle:{"overflow-y":"hidden"},attrs:{gutter:5}},[a("el-col",{staticStyle:{padding:"0"},attrs:{span:16}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{ref:"iframe1",staticClass:"deviceState"},[a("iframe",{staticClass:"deviceStateCharts",attrs:{id:"iframe1",src:t.src2,marginwidth:"0",marginheight:"0",width:"100%",height:"100%",frameborder:"0"}})])])],1)],1),t._v(" "),a("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[a("div",{staticClass:"monitor",staticStyle:{position:"relative"}},[a("div",{staticClass:"monitor_title"},[a("span",[t._v("产量实时监控")])]),t._v(" "),a("div",{staticClass:"monitor_con"},[a("div",{staticClass:"fangkuai",on:{click:function(e){return t.tozj()}}},[a("div",{staticStyle:{"font-size":"0.5rem","margin-bottom":"0.3rem",display:"flex","align-items":"center","justify-content":"center",width:"50%"}},[a("span",[t._v("整经总产量")])]),t._v(" "),a("div",{staticClass:"num",staticStyle:{color:"#08FF00","font-size":"2rem"}},t._l(t.sumzj,function(e,i){return a("span",{key:i,staticStyle:{background:"#2D2D2D",margin:"0.2rem","padding-left":"0.2rem","padding-right":"0.2rem"}},[t._v(t._s(e.num))])}),0)]),t._v(" "),a("div",{staticClass:"fangkuai2",on:{click:function(e){return t.tojs()}}},[a("div",{staticStyle:{"font-size":"0.5rem","margin-bottom":"0.3rem",display:"flex","align-items":"center","justify-content":"center",width:"50%"}},[a("span",[t._v("浆纱总产量")])]),t._v(" "),a("div",{staticClass:"num",staticStyle:{color:"#FFCC00","font-size":"2rem"}},t._l(t.sumjs,function(e,i){return a("span",{key:i,staticStyle:{background:"#2D2D2D",margin:"0.2rem","padding-left":"0.2rem","padding-right":"0.2rem"}},[t._v(t._s(e.num))])}),0)]),t._v(" "),a("div",{staticClass:"fangkuai",on:{click:function(e){return t.tozz()}}},[a("div",{staticStyle:{"font-size":"0.5rem","margin-bottom":"0.3rem",display:"flex","align-items":"center","justify-content":"center",width:"50%"}},[a("span",[t._v("织造总产量")])]),t._v(" "),a("div",{staticClass:"num",staticStyle:{color:"#CDFF00","font-size":"2rem"}},t._l(t.sumzz,function(e,i){return a("span",{key:i,staticStyle:{background:"#2D2D2D",margin:"0.2rem","padding-left":"0.2rem","padding-right":"0.2rem"}},[t._v(t._s(e.num))])}),0)]),t._v(" "),a("div",{staticClass:"fangkuai2",on:{click:function(e){return t.toyb()}}},[a("div",{staticStyle:{"font-size":"0.5rem","margin-bottom":"0.3rem",display:"flex","align-items":"center","justify-content":"center",width:"50%"}},[a("span",[t._v("验布总产量")])]),t._v(" "),a("div",{staticClass:"num",staticStyle:{color:"#00FFFF","font-size":"2rem"}},t._l(t.sumyb,function(e,i){return a("span",{key:i,staticStyle:{background:"#2D2D2D",margin:"0.2rem","padding-left":"0.2rem","padding-right":"0.2rem"}},[t._v(t._s(e.num))])}),0)])]),t._v(" "),a("div",{staticStyle:{display:"flex",width:"100%","margin-right":"16px"}},[a("div",{staticClass:"monitor_title2",staticStyle:{"margin-top":"0"}},[a("span",[t._v("织机班次产量对比")])]),t._v(" "),a("div",{staticClass:"monitor_title3",staticStyle:{"margin-top":"0"}},[a("span",[t._v("设备实时开机率")])])]),t._v(" "),a("div",{staticStyle:{display:"flex",width:"100%",height:"18%","margin-right":"16px"}},[a("div",{staticClass:"echart1",attrs:{id:"echart1"}}),t._v(" "),a("div",{staticClass:"echart2",attrs:{id:"echart2"}})]),t._v(" "),a("div",{staticStyle:{display:"flex",width:"100%","margin-right":"16px"}},[a("div",{staticClass:"monitor_title4",staticStyle:{"margin-top":"0","margin-right":"2%"}},[a("span",[t._v("整经产量能源对比")])]),t._v(" "),a("div",{staticClass:"monitor_title4",staticStyle:{"margin-top":"0"}},[a("span",[t._v("浆纱产量能源对比")])])]),t._v(" "),a("div",{staticStyle:{display:"flex",width:"100%",height:"23%","margin-right":"16px"}},[a("div",{staticClass:"echart1",staticStyle:{width:"54%"},attrs:{id:"echart3"}}),t._v(" "),a("div",{staticClass:"echart2",staticStyle:{width:"46%"},attrs:{id:"echart4"}})]),t._v(" "),a("div",{staticStyle:{display:"flex",width:"100%","margin-right":"16px"}},[a("div",{staticClass:"monitor_title4",staticStyle:{"margin-top":"0","margin-right":"2%"}},[a("span",[t._v("织机产量能源对比")])]),t._v(" "),a("div",{staticClass:"monitor_title4",staticStyle:{"margin-top":"0"}},[a("span",[t._v("验布产量能源对比")])])]),t._v(" "),a("div",{staticStyle:{display:"flex",width:"100%",height:"23%","margin-right":"16px"}},[a("div",{staticClass:"echart1",staticStyle:{width:"54%"},attrs:{id:"echart5"}}),t._v(" "),a("div",{staticClass:"echart2",staticStyle:{width:"46%"},attrs:{id:"echart6"}})])])])],1)],1)},staticRenderFns:[]};var b,_=a("VU/8")(y,v,!1,function(t){a("uOMB"),a("kHnr")},"data-v-1779488c",null).exports,w=(b={name:"zj",data:function(){return{timer:null,companyId:this.$route.params.id,workshop_id:this.$route.params.workshopid,dts:null,speedlist:[],zong:null}},methods:{back:function(){this.$router.push({path:"/productMonitor2",name:"productMonitor2",params:{id:this.companyId,workshop_id:this.workshop_id}})},sortByKey:function(t,e){return t.sort(function(t,a){var i=t[e],o=a[e];return i<o?-1:i>o?1:0})},getbcl:function(){var t=this,e=[],a=[],i=[],o=[],n=[],s=this;s.speedlist=[];var r=[],l="http://106.12.219.66:8227/report/getSimpleReport";m()({url:l,method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{tableName:"warping"}}).then(function(t){t.data.data=s.sortByKey(t.data.data,"machine_id");var i=0;t.data.data.length<10?s.zong="0"+t.data.data.length:s.zong=t.data.data.length;for(var l=0;l<t.data.data.length;l++)i+=t.data.data[l].number_broken_ends,0==l?t.data.data[l].margin="margin-left:9rem":4==l?t.data.data[l].margin="margin-left:3.5rem":9==l&&(t.data.data[l].margin="margin-left:9rem"),s.speedlist.push(t.data.data[l]),e.push(t.data.data[l].machine_id),a.push(t.data.data[l].current_shift_output),r.push({machine_id:t.data.data[l].machine_id,current_shift_output:t.data.data[l].current_shift_output}),o.push(t.data.data[l].setting_length-t.data.data[l].current_length),n.push(t.data.data[l].current_length);s.echart2(e,n,o),s.dts=i}).then(function(){var o=[];console.log(e);for(var n=function(n){m()({url:l,method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{tableName:"warping_his",query:{machine_id:e[n]},sort:"DESC",sortColumn:"id"}}).then(function(t){if(o.push({machine_id:e[n],current_shift_output:t.data.data[0].current_shift_output}),o.length==e.length){o=s.sortByKey(o,"machine_id");for(var r=0;r<o.length;r++)i.push(o[r].current_shift_output);s.echart(e,a,i)}})},r=0;r<e.length;r++)n(r)})},echart:function(t,e,a){var i=this.$echarts.init(document.getElementById("echart7"));i.clear();var o={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},color:["#FF0000","#6AB0B8"],legend:{orient:"vertical",data:["当班","上一班"],itemWidth:15,itemHeight:8,top:"4%",right:"17%",textStyle:{color:"white",fontSize:17,fontStyle:"normal"}},grid:{bottom:"8%",top:"25%",right:"0%",left:"14.5%"},title:{padding:[0,90,10,90],left:"center",top:"8%",textStyle:{color:"#00E6F1",fontSize:25,fontWeight:"normal"},text:"单台整经机班产对比"},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10},fontStyle:"italic"},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"长度/m",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:10},splitLine:{show:!0,lineStyle:{type:"solid",color:"rgba(84,84,84,0.5)"}},nameLocation:"end",axisLine:{lineStyle:{color:"rgba(0,0,0,0)",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}}}],series:[{name:"当班",type:"bar",data:e},{name:"上一班",type:"bar",data:a}]};i.setOption(o),window.addEventListener("resize",function(){i.resize()})},echart2:function(t,e,a){var i=this.$echarts.init(document.getElementById("echart8"));i.clear();var o={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},color:["#FF0000","#FFFF00"],legend:{orient:"vertical",data:["当前经长","未完成经长"],itemWidth:15,itemHeight:8,top:"17%",right:"7%",textStyle:{color:"white",fontSize:17,fontStyle:"normal"}},grid:{bottom:"9%",top:"35%",right:"7%",left:"8%"},title:{padding:[3,90,2,90],left:"center",top:"20%",textStyle:{color:"#00E6F1",fontSize:25,fontWeight:"normal"},text:"当前经长和未完成经长对比"},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"},axisLabel:{show:!0,fontStyle:"italic",textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"长度/m",min:0,nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:13},splitLine:{show:!0,lineStyle:{type:"dashed",color:"rgba(84,84,84,0.5)"}},nameLocation:"end",axisLine:{lineStyle:{color:"rgba(0,0,0,0)",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:10}}}],series:[{name:"未完成经长",type:"bar",barGap:"-100%",barWidth:"45%",data:a},{name:"当前经长",type:"bar",barWidth:"45%",data:e}]};i.setOption(o),window.addEventListener("resize",function(){i.resize()})},getWarningPushDataTiming:function(){var t=this,e=setInterval(function(){t.getbcl()},15e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})}},filters:{formatDate:function(t){return f(new Date(t),"yyyy-MM-dd hh:mm:ss")}},mounted:function(){var t=this;this.timer=setInterval(function(){t.date=new Date},1e3),this.getbcl(),this.getWarningPushDataTiming()}},c()(b,"filters",{upper:function(t){return t?(t=t.toString()).toUpperCase():""}}),c()(b,"beforeDestroy",function(){this.timer&&clearInterval(this.timer)}),b),S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content4"},[t._m(0),t._v(" "),a("div",{staticClass:"monitor"},[a("div",{staticClass:"monitor_left"},[a("div",{staticClass:"monitor_left_top"},[a("div",{staticClass:"img"},[a("div",{staticClass:"img_con"},[a("a",{staticStyle:{"font-size":"1rem",color:"#5D7091","text-decoration":"none"},on:{click:function(e){return t.back()}}},[t._v("七星智能纺织")]),a("div",{staticClass:"jiantou"}),a("span",{staticStyle:{"margin-right":"1rem"}},[t._v("整经机")])])])]),t._v(" "),a("div",{staticClass:"monitor_left_mid"},[a("div",{staticClass:"cldb_dts"},[a("div",{staticStyle:{width:"74%",height:"100%"},attrs:{id:"echart7"}}),t._v(" "),a("div",{staticClass:"circle"},[a("div",{staticClass:"circle_con"},[a("div",{staticClass:"font"},[a("span",[t._v("断头数")]),t._v(" "),a("span",{staticStyle:{color:"#F7FF00","font-size":"1.5rem","margin-top":"0.3rem"}},[t._v(t._s(t.dts))])])])])]),t._v(" "),a("div",{staticClass:"sscs"},[a("div",{staticClass:"sscs_title"},[t._v("\n    实时车速监控\n  ")]),t._v(" "),a("div",{staticClass:"sscs_con"},t._l(t.speedlist,function(e,i){return a("div",{key:i,staticClass:"speed_con_one",style:e.margin},[a("div",{staticClass:"span1"},[t._v(t._s(t._f("upper")(e.machine_id)))]),t._v(" "),a("div",{staticClass:"span2"},[t._v(t._s(e.current_speed))]),t._v(" "),a("div",{staticClass:"span3"},[t._v("m/min")])])}),0)])])]),t._v(" "),a("div",{staticClass:"monitor_right"},[t._m(1),t._v(" "),a("div",{staticClass:"monitor_right_bottom"},[a("div",{staticClass:"imgs1"},[a("div",{staticClass:"card6_con"},[a("span",{staticStyle:{"font-size":"1rem",color:"#00FF99","margin-top":"1rem"}},[t._v("浙江省七星纺织有限公司")]),t._v(" "),a("span",{staticStyle:{color:"#FFF700","font-size":"1.3rem","margin-top":"0.5rem"}},[t._v("整经机总数："+t._s(t.zong))])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("七星智能纺织-整经机")]),this._v(" "),e("h1",{staticClass:"tip"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"monitor_right_top"},[e("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"echart8"}})])}]};var z=a("VU/8")(w,S,!1,function(t){a("DSM5")},"data-v-8d9c09a2",null).exports,F={name:"productMonitor",data:function(){return{timer:null,companyId:this.$route.params.id,workshop_id:this.$route.params.workshopid,speedlist:[],speedlist2:[],zong:null}},methods:{back:function(){this.$router.push({path:"/productMonitor2",name:"productMonitor2",params:{id:this.companyId,workshop_id:this.workshop_id}})},sortByKey:function(t,e){return t.sort(function(t,a){var i=t[e],o=a[e];return i<o?-1:i>o?1:0})},getdate:function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();return e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a),t.getFullYear()+"-"+e+"-"+a},getcl:function(t){console.log(t);var e=this;t=e.sortByKey(t,"machine_id");for(var a=[],i=[],o=[],n=function(a){switch(t[a].machine_id){case"sj0104":t[a].machinename="浆纱机2#",t[a].looplistId="p1286c52666";break;case"sj0103":t[a].machinename="浆纱机3#",t[a].looplistId="p1286c16590";break;case"sj0205":t[a].machinename="浆纱机5#",t[a].looplistId="p1286c22026";break;case"sj0206":t[a].machinename="浆纱机6#",t[a].looplistId="p1286c61080";break;case"sj0204":t[a].machinename="浆纱机4#",t[a].looplistId="p1286c46865";break;case"sj0101":t[a].machinename="浆纱机1#",t[a].looplistId="p1286c62811";break;default:t[a].machinename=""}m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:"10000012"},data:{tableName:"electric_history_h",selectLikeFields:{startTime:e.getdate()},query:{looplistId:t[a].looplistId},selectFields:["sum(electric+0) as electric","looplistId"]}}).then(function(e){t[a].electric=e.data.data[0].electric})},s=0;s<t.length;s++)n(s);setTimeout(function(){console.log(t),t=e.sortByKey(t,"machine_id");for(var n=0;n<t.length;n++)t[n].current_shift_output?i.push(t[n].current_shift_output):i.push(0),a.push(t[n].machine_id),o.push(t[n].electric.toFixed(0));e.echart2(a,i,o)},1e3)},getspeed:function(){var t=this;t.speedlist=[];var e=[],a=[],i=[],o=[];m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{tableName:"sizing"}}).then(function(n){t.getcl(n.data.data),n.data.data.length<10?t.zong="0"+n.data.data.length:t.zong=n.data.data.length,t.speedlist2=t.correctArr(t.sortByKey(n.data.data,"speed"));for(var s=(e=t.sortByKey(n.data.data,"speed")).length-1;s>=e.length-3;s--)s==e.length-1?e[s].backgr="background:black;color:red":s==e.length-2?e[s].backgr="color:#FFEE01":s==e.length-3&&(e[s].backgr="background:black;color:#42FF00"),e[s].f_u_tension=parseFloat(e[s].f_u_tension),isNaN(e[s].f_u_tension)&&(e[s].f_u_tension=0),t.speedlist.push(e[s]);console.log(n),n.data.data=t.sortByKey(n.data.data,"machine_id");for(var r=0;r<n.data.data.length;r++)a.push(n.data.data[r].machine_id),i.push(n.data.data[r].current_shift_output),o.push(n.data.data[r].last_shift_output);t.echart(a,i,o)})},correctArr:function(t){for(var e=[],a=t.length-1;a>=0;a--)e.push(t[a]);return e},echart:function(t,e,a){var i=this.$echarts.init(document.getElementById("echart11"));i.clear();var o={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},color:["#FF6F00","#FFEE00"],legend:{orient:"vertical",data:["当班","上一班"],itemWidth:15,itemHeight:8,top:"21%",right:"17%",textStyle:{color:"white",fontSize:17,fontStyle:"normal"}},grid:{bottom:"9%",top:"35%",right:"12%",left:"15%"},title:{padding:[3,90,2,90],left:"center",top:"21%",textStyle:{color:"#00E6F1",fontSize:25,fontWeight:"normal"},text:"单台浆纱机班产对比"},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:13}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"产量/m",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:13},splitLine:{show:!0,lineStyle:{type:"solid",color:"rgba(84,84,84,0.5)"}},nameLocation:"end",axisLine:{lineStyle:{color:"rgba(0,0,0,0)",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:13}}}],series:[{name:"当班",type:"bar",data:e},{name:"上一班",type:"bar",data:a}]};i.setOption(o),window.addEventListener("resize",function(){i.resize()})},echart2:function(t,e,a){var i=this.$echarts.init(document.getElementById("echart12"));i.clear();var o={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},color:["#00FF19","#0099FF"],legend:{orient:"vertical",data:["电量","产量"],itemWidth:15,itemHeight:8,top:"11%",right:"18%",textStyle:{color:"white",fontSize:17,fontStyle:"normal"}},grid:{bottom:"9%",top:"35%",right:"12%",left:"15%"},title:{padding:[3,90,2,90],left:"center",top:"11%",textStyle:{color:"#00E6F1",fontSize:25,fontWeight:"normal"},text:"浆纱机产量与电量实时对比"},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:13}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"电量/Kwh",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:13},splitLine:{show:!0,lineStyle:{type:"solid",color:"rgba(84,84,84,0.5)"}},nameLocation:"end",axisLine:{lineStyle:{color:"rgba(0,0,0,0)",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:13}}},{type:"value",name:"产量/m",nameTextStyle:{color:"rgba(238,219,219,1)",fontSize:13},splitLine:{show:!0,lineStyle:{type:"solid",color:"rgba(84,84,84,0.5)"}},nameLocation:"end",axisLine:{lineStyle:{color:"rgba(0,0,0,0)",width:1}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#FFFFFF",fontSize:13}}}],series:[{name:"产量",type:"bar",yAxisIndex:1,data:e},{name:"电量",type:"bar",yAxisIndex:0,data:a}]};i.setOption(o),window.addEventListener("resize",function(){i.resize()})},getWarningPushDataTiming:function(){var t=this,e=setInterval(function(){t.getspeed()},15e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})}},filters:{formatDate:function(t){return f(new Date(t),"yyyy-MM-dd hh:mm:ss")}},mounted:function(){var t=this;this.timer=setInterval(function(){t.date=new Date},1e3),this.getspeed(),this.getWarningPushDataTiming()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content4"},[t._m(0),t._v(" "),a("div",{staticClass:"monitor"},[a("div",{staticClass:"monitor_left"},[a("div",{staticClass:"monitor_left_top"},[a("div",{staticClass:"img"},[a("div",{staticClass:"img_con"},[a("a",{staticStyle:{"font-size":"1rem",color:"#5D7091","text-decoration":"none"},on:{click:function(e){return t.back()}}},[t._v("七星智能纺织")]),a("div",{staticClass:"jiantou"}),a("span",{staticStyle:{"margin-right":"1rem"}},[t._v("浆纱机")])])])]),t._v(" "),a("div",{staticClass:"monitor_left_mid"},[a("div",{staticClass:"top"},[a("div",{staticClass:"top_title"},[t._v("浆纱机Top3车速监控")]),t._v(" "),t._m(1),t._v(" "),t._l(t.speedlist,function(e,i){return a("div",{key:i,staticClass:"top_con",style:e.backgr},[a("span",[t._v(t._s(e.speed))]),a("span",[t._v(t._s(e.machine_id))]),a("span",[t._v(t._s(e.last_shift_output))]),a("span",[t._v(t._s(e.shift_beam_num))])])})],2),t._v(" "),a("div",{staticClass:"speed"},[a("div",{staticClass:"top_title"},[t._v("实时车速监控")]),t._v(" "),a("div",{staticClass:"speed_con"},t._l(t.speedlist2,function(e,i){return a("div",{key:i,staticClass:"speed_con_one"},[a("div",{staticClass:"span1"},[t._v(t._s(e.machine))]),t._v(" "),a("div",{staticClass:"span2"},[t._v(t._s(e.speed))]),t._v(" "),a("div",{staticClass:"span3"},[t._v("m/min")])])}),0)]),t._v(" "),a("div",{staticClass:"car"}),t._v(" "),a("div",{staticClass:"card6"},[a("div",{staticClass:"card6_con"},[a("span",{staticStyle:{"font-size":"1rem"}},[t._v("浙江省七星纺织有限公司")]),t._v(" "),a("span",{staticStyle:{color:"#FFF700","font-size":"1.8rem","margin-top":"1rem"}},[t._v("浆纱机总数："+t._s(t.zong))])])])])]),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("七星智能纺织-浆纱机")]),this._v(" "),e("h1",{staticClass:"tip"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top_head"},[e("span",[this._v("车速m/min")]),e("span",[this._v("机台号")]),e("span",[this._v("上一班产量")]),e("span",[this._v("当班完成轴数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"monitor_right"},[e("div",{staticStyle:{width:"100%",height:"45%"},attrs:{id:"echart11"}}),this._v(" "),e("div",{staticStyle:{width:"100%",height:"45%"},attrs:{id:"echart12"}})])}]};var I=a("VU/8")(F,k,!1,function(t){a("IfBd")},"data-v-3e7274de",null).exports,L={name:"yb",data:function(){return{timer:null,companyId:this.$route.params.id,workshopId:this.$route.params.workshopid,daysum:null}},methods:{back:function(){this.$router.push({path:"/productMonitor2",name:"productMonitor2",params:{id:this.companyId,workshop_id:this.workshopId}})},echart:function(){var t=this.$echarts.init(document.getElementById("echart_pzfx"));t.clear();var e=void 0,a=void 0;1==this.workshopId?(e=[2058,751,749,744,678,636],a=[41.2,53.6,66,78.3,89.5,100]):2==this.workshopId&&(e=[61,49,47,40,31,30],a=[23.6,42.6,60.9,76.4,88.4,100]);var i={title:{text:"8月疵点品种分析",textStyle:{color:"#00C4FF",fontSize:15},left:"45%"},grid:{left:"20%",right:"15%"},xAxis:[{type:"category",data:["SF2598","SA2640","SF8300","SA41420","SA1418","SF6992"],axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"数量/个",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},splitLine:{show:!1},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},{type:"value",name:"占比/%",splitLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],series:[{name:"数量",type:"bar",yAxisIndex:0,color:"#01ACF4",markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["0%","30%"],color:"white",fontWeight:"bold"}},data:e},{name:"占比",type:"line",yAxisIndex:1,markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["10%","30%"],color:"white",fontWeight:"bold"}},data:a}]};t.setOption(i),window.addEventListener("resize",function(){t.resize()})},echart2:function(){var t=this.$echarts.init(document.getElementById("echart_qsfx"));t.clear();var e={color:["#07F7C8","#FF7501"],legend:{data:["二车间","三车间"],textStyle:{color:"#00C4FF",fontSize:15},right:"10%",top:"10%"},title:{text:"一车间新旧机型每月疵点趋势分析",textStyle:{color:"#00C4FF",fontSize:15},left:"35%"},grid:{left:"20%",right:"15%",top:"25%"},xAxis:[{type:"category",data:[1,2,3,4,5,6,7,8],axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"个数/个",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},splitLine:{show:!1},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],series:[{name:"二车间",type:"line",markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["0%","30%"],color:"white",fontWeight:"bold"}},data:[931,894,1124,925,774,1141,1243,895]},{name:"三车间",type:"line",markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["0%","30%"],color:"white",fontWeight:"bold"}},data:[1184,1243,1092,1146,979,1035,941,703]}]};t.setOption(e),window.addEventListener("resize",function(){t.resize()})},echart3:function(){var t=this.$echarts.init(document.getElementById("echart_zlfx"));t.clear();var e=void 0,a=void 0;1==this.workshopId?(e=[2058,1791,1698,1640,1547,1281],a=[20.5,38.4,55.4,71.8,87.2,100]):2==this.workshopId&&(e=[1900,1159,1064,853,705,592],a=[30.3,48.8,65.7,79.3,90.6,100]);var i={title:{text:"8月疵点种类分析",textStyle:{color:"#00C4FF",fontSize:15},left:"45%"},grid:{left:"25%",right:"10%"},xAxis:[{type:"category",data:["断经(有)","断经","双经(有)","双经","分散性纬缩","纬缩降等"],axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"数量/个",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},splitLine:{show:!1},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},{type:"value",name:"占比/%",splitLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],series:[{name:"数量",type:"bar",yAxisIndex:0,color:"#01ACF4",markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["0%","30%"],color:"white",fontWeight:"bold"}},data:e},{name:"占比",type:"line",yAxisIndex:1,markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["10%","30%"],color:"white",fontWeight:"bold"}},data:a}]};t.setOption(i),window.addEventListener("resize",function(){t.resize()})},echart4:function(){var t=this.$echarts.init(document.getElementById("echart_qsfx2"));t.clear();var e={color:["#FF4A7B","#01ACF4"],legend:{data:["新机","旧机"],textStyle:{color:"#00C4FF",fontSize:15},right:"10%",top:"10%"},title:{text:"每月疵点数量分布趋势分析",textStyle:{color:"#00C4FF",fontSize:15},left:"45%"},grid:{left:"25%",right:"10%",top:"25%"},xAxis:[{type:"category",data:[1,2,3,4,5,6,7,8],axisPointer:{type:"shadow"},axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"个数/个",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:12}},splitLine:{show:!1},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}}],series:[{name:"新机",type:"line",markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["10%","30%"],color:"white",fontWeight:"bold"}},data:[638,721,623,301,563,367,388,402]},{name:"旧机",type:"line",markPoint:{data:[{type:"max",name:"最大值"}],label:{show:!0,position:["0%","30%"],color:"white",fontWeight:"bold"}},data:[1117,1317,1609,1442,1554,1678,1624,1328]}]};t.setOption(e),window.addEventListener("resize",function(){t.resize()})}},filters:{},mounted:function(){console.log(this.$route.params.jsumyb),this.daysum=this.$route.params.jsumyb,this.echart(),this.echart2(),this.echart3(),this.echart4()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content4"},[t._m(0),t._v(" "),a("div",{staticClass:"monitor"},[a("div",{staticClass:"monitor_left"},[a("div",{staticClass:"monitor_left_top"},[a("div",{staticClass:"img"},[a("div",{staticClass:"img_con"},[a("a",{staticStyle:{"font-size":"1rem",color:"#5D7091","text-decoration":"none"},on:{click:function(e){return t.back()}}},[t._v("七星智能纺织")]),t._v(" "),a("div",{staticClass:"jiantou"}),a("span",{staticStyle:{"margin-right":"1rem"}},[t._v("验布机")])])])]),t._v(" "),a("div",{staticClass:"ecahrt_zlfx",attrs:{id:"echart_zlfx"}}),t._v(" "),a("div",{staticClass:"ecahrt_qsfx",attrs:{id:"echart_qsfx"}})]),t._v(" "),a("div",{staticClass:"monitor_middle"},[a("div",{staticClass:"circle_con"},[a("div",{staticClass:"circles"},[t._m(1),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"font"},[a("span",{staticStyle:{"font-size":"1.2rem"}},[t._v("今日验布米数\n            ")]),a("span",{staticStyle:{"font-size":"2.3rem",color:"#EEFF00"}},[t._v(t._s(t.daysum))])])])]),t._v(" "),t._m(3)]),t._v(" "),t._m(4)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("七星智能纺织-验布机")]),this._v(" "),e("h1",{staticClass:"tip"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card5"},[e("div",{staticClass:"card5_con"},[e("span",{staticClass:"jin"},[this._v("今")]),this._v(" "),e("span",{staticClass:"zong"},[this._v("今日疵点总数")]),this._v(" "),e("span",{staticClass:"num"},[this._v("18")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card4"},[e("div",{staticClass:"card4_con"},[e("span",{staticClass:"jin"},[this._v("总")]),this._v(" "),e("span",{staticClass:"zong"},[this._v("验布机总数")]),this._v(" "),e("span",{staticClass:"num",staticStyle:{color:"#00FF08",right:"3.2rem"}},[this._v("26")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"machine"},[e("div",{staticClass:"machine_img"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"monitor_right"},[e("div",{staticClass:"monitor_left_top"}),this._v(" "),e("div",{staticClass:"ecahrt_zlfx",attrs:{id:"echart_pzfx"}}),this._v(" "),e("div",{staticClass:"ecahrt_qsfx",attrs:{id:"echart_qsfx2"}})])}]};var D,E=a("VU/8")(L,C,!1,function(t){a("vqrG")},"data-v-37f3fd05",null).exports,A=(D={name:"zz",data:function(){return{timer:null,companyId:this.$route.params.id,workshop_id:this.$route.params.workshopid,daylist:[],tableData:[],pageNum:1,pageSize:500,list:[]}},methods:{back:function(){this.$router.push({path:"/productMonitor2",name:"productMonitor2",params:{id:this.companyId,workshop_id:this.workshop_id}})},sortByKey:function(t,e){return t.sort(function(t,a){var i=t[e],o=a[e];return i<o?-1:i>o?1:0})},fun_date:function(t){var e=new Date,a=(e.getFullYear(),e.getMonth(),e.getDate(),new Date(e));a.setDate(e.getDate()+t);var i=void 0,o=void 0;return o=a.getDate()<10?"0"+a.getDate():a.getDate(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,a.getFullYear()+"-"+i+"-"+o},getrcl:function(){var t=this;m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{selectFields:["shiftDate","WorkShopID","sum(product_meter/10) as productMeter"],tableName:"lm_shift_his",query:{},groupByColumn:["shiftDate,WorkShopID having shiftDate > '"+this.fun_date(-8).toString()+"'"]}}).then(function(e){for(var a=[],i=[],o=[],n=[],s=[],r=0;r<e.data.data.length;r++)e.data.data[r].shiftDate=t.addDate(e.data.data[r].shiftDate).substr(5,5),-1==n.indexOf(e.data.data[r].shiftDate)&&n.push(e.data.data[r].shiftDate),e.data.data[r].shiftDate=t.dateAddDays(e.data.data[r].shiftDate,1),1==e.data.data[r].WorkShopID?a.push(e.data.data[r].productMeter):2==e.data.data[r].WorkShopID?i.push(e.data.data[r].productMeter):3==e.data.data[r].WorkShopID&&o.push(e.data.data[r].productMeter);for(var l=0;l<o.length;l++)s.push((o[l]+a[l]+i[l])/3);t.echart4(n,a,i,o,s)})},addDate:function(t){Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};for(var a in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var e=Date.parse(new Date(t));return e/=1e3,e+=86400,new Date(1e3*e).format("yyyy-MM-dd hh:mm:ss")},gettcl:function(){var t=this;m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{selectFields:["shiftDate","WorkShopID","sum(product_meter/10)/count(MachineID) as productMeter"],tableName:"lm_shift_his",query:{},groupByColumn:["shiftDate,WorkShopID having shiftDate > '"+this.fun_date(-8).toString()+"'"]}}).then(function(e){for(var a=[],i=[],o=[],n=[],s=[],r=0;r<e.data.data.length;r++)e.data.data[r].shiftDate=t.addDate(e.data.data[r].shiftDate).substr(5,5),-1==n.indexOf(e.data.data[r].shiftDate)&&n.push(e.data.data[r].shiftDate),e.data.data[r].shiftDate=t.dateAddDays(e.data.data[r].shiftDate,1),1==e.data.data[r].WorkShopID?a.push(e.data.data[r].productMeter):2==e.data.data[r].WorkShopID?i.push(e.data.data[r].productMeter):3==e.data.data[r].WorkShopID&&o.push(e.data.data[r].productMeter);for(var l=0;l<o.length;l++)s.push((o[l]+a[l]+i[l])/3);t.echart2(n,a,i,o,s)})},getDay:function(t){var e=new Date,a=e.getTime()+864e5*t;e.setTime(a);var i=e.getFullYear(),o=e.getMonth(),n=e.getDate();return i+"-"+(o=this.doHandleMonth(o+1))+"-"+(n=this.doHandleMonth(n))},doHandleMonth:function(t){var e=t;return 1==t.toString().length&&(e="0"+t),e},getliaoji:function(){var t=this;console.log(this.getDay(1).substr(5,5));var e=[];e.push({name:this.getDay(1).substr(5,5)+"白班",style:"background:white;color:black",prop:"oneMorning"}),e.push({style:"color:#FFE200;background:black",name:this.getDay(1).substr(5,5)+"夜班",prop:"oneNight"}),e.push({name:this.getDay(2).substr(5,5)+"白班",style:"background:white;color:black",prop:"twoMorning"}),e.push({style:"color:#FFE200;background:black",name:this.getDay(2).substr(5,5)+"夜班",prop:"twoNight"}),e.push({name:this.getDay(3).substr(5,5)+"白班",style:"background:white;color:black",prop:"threeMorning"}),e.push({style:"color:#FFE200;background:black",name:this.getDay(3).substr(5,5)+"夜班",prop:"threeNight"}),e.push({name:this.getDay(4).substr(5,5)+"白班",style:"background:white;color:black",prop:"fourMorning"}),e.push({style:"color:#FFE200;background:black",name:this.getDay(4).substr(5,5)+"夜班",prop:"fourNight"}),e.push({name:this.getDay(5).substr(5,5)+"白班",style:"background:white;color:black",prop:"fiveMorning"}),e.push({style:"color:#FFE200;background:black",name:this.getDay(5).substr(5,5)+"夜班",prop:"fiveNight"}),e.push({name:this.getDay(6).substr(5,5)+"白班",style:"background:white;color:black",prop:"sixMorning"}),e.push({style:"color:#FFE200;background:black",name:this.getDay(6).substr(5,5)+"夜班",prop:"sixNight"});this.daylist=[{name:"品种",style:"background:rgba(0,0,0,0);color:#00D8FF;width:8.85%;",prop:"styleName"},{name:"日产",style:"background:rgba(0,0,0,0);color:#00D8FF",prop:"dayProductMeter"},{name:"开台数",style:"background:rgba(0,0,0,0);color:#00D8FF",prop:"openMachineNum"},{name:"台数",style:"background:rgba(0,0,0,0);color:#00D8FF",prop:"liaoJiMachineNum"}].concat(e),console.log(this.daylist);m()({url:"http://106.12.219.66:8227/report/getLiaoJiStatistics",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{pageNum:this.pageNum,pageSize:this.pageSize}}).then(function(e){t.tableData=e.data.data.list})},getspeed:function(){var t=this;m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{selectFields:["shiftDate","WorkShopID","avg(rpm) as rpm"],tableName:"lm_shift_his",query:{},groupByColumn:["shiftDate,WorkShopID having shiftDate > '"+this.fun_date(-8).toString()+"'"]}}).then(function(e){for(var a=[],i=[],o=[],n=[],s=[],r=0;r<e.data.data.length;r++)e.data.data[r].shiftDate=t.addDate(e.data.data[r].shiftDate).substr(5,5),-1==n.indexOf(e.data.data[r].shiftDate)&&n.push(e.data.data[r].shiftDate),e.data.data[r].shiftDate=t.dateAddDays(e.data.data[r].shiftDate,1),1==e.data.data[r].WorkShopID?a.push(e.data.data[r].rpm):2==e.data.data[r].WorkShopID?i.push(e.data.data[r].rpm):3==e.data.data[r].WorkShopID&&o.push(e.data.data[r].rpm);for(var l=0;l<o.length;l++)s.push((o[l]+a[l]+i[l])/3);t.echart3(n,a,i,o,s)})},getEff:function(){var t=this;m()({url:"http://106.12.219.66:8227/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:this.companyId},data:{selectFields:["shiftDate","WorkShopID","avg(efficiency)"],tableName:"lm_shift_his",query:{},groupByColumn:["shiftDate,WorkShopID having shiftDate > '"+this.fun_date(-8).toString()+"'"]}}).then(function(e){for(var a=[],i=[],o=[],n=[],s=[],r=0;r<e.data.data.length;r++)e.data.data[r].shiftDate=t.addDate(e.data.data[r].shiftDate).substr(5,5),-1==n.indexOf(e.data.data[r].shiftDate)&&n.push(e.data.data[r].shiftDate),e.data.data[r].shiftDate=t.dateAddDays(e.data.data[r].shiftDate,1),1==e.data.data[r].WorkShopID?a.push(e.data.data[r]["avg(efficiency)"]):2==e.data.data[r].WorkShopID?i.push(e.data.data[r]["avg(efficiency)"]):3==e.data.data[r].WorkShopID&&o.push(e.data.data[r]["avg(efficiency)"]);for(var l=0;l<o.length;l++)s.push((o[l]+a[l]+i[l])/3);t.echart(n,a,i,o,s)})},dateAddDays:function(t,e){var a=new Date(t.replace(/-/g,"/")),i=void 0,o=void 0;return o=(a=new Date(1e3*(a/1e3+86400*e))).getDate()<10?"0"+a.getDate():a.getDate(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,a.getFullYear()+"-"+i+"-"+o},getWarningPushDataTiming:function(){var t=this,e=setInterval(function(){t.getbcl()},15e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})},echart:function(t,e,a,i,o){var n=e.concat(a).concat(i).concat(o),s=Math.min.apply(Math,p()(n))-10,r=this.$echarts.init(document.getElementById("echartzz"));r.clear();var l={title:{text:"车间日平均效率对比",textStyle:{color:"#00C4FF",fontSize:17},left:"center"},legend:{data:["一车间","二车间","三车间","平均效率"],itemWidth:15,itemHeight:8,top:"12%",right:"3%",textStyle:{color:"white",fontSize:13,fontStyle:"normal"}},grid:{bottom:"15%",top:"25%"},xAxis:{type:"category",name:"日期",data:t,axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},yAxis:{type:"value",name:"效率/%",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},min:s.toFixed(0),axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},series:[{data:e,type:"line",name:"一车间"},{data:a,type:"line",name:"二车间"},{data:i,type:"line",name:"三车间"},{data:o,type:"line",name:"平均效率"}]};r.setOption(l),window.addEventListener("resize",function(){r.resize()})},echart4:function(t,e,a,i){var o=this.$echarts.init(document.getElementById("echartzz4"));o.clear();var n={title:{text:"车间实际日产量对比",textStyle:{color:"#00C4FF",fontSize:17},left:"center"},legend:{data:["一车间","二车间","三车间"],itemWidth:15,itemHeight:8,top:"12%",right:"3%",textStyle:{color:"white",fontSize:13,fontStyle:"normal"}},grid:{bottom:"15%",top:"25%"},xAxis:{type:"category",name:"日期",data:t,axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},yAxis:{type:"value",name:"产量/kg",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},series:[{data:e,type:"line",name:"一车间"},{data:a,type:"line",name:"二车间"},{data:i,type:"line",name:"三车间"}]};o.setOption(n),window.addEventListener("resize",function(){o.resize()})},echart2:function(t,e,a,i,o){var n=this.$echarts.init(document.getElementById("echartzz2"));n.clear();var s={title:{text:"台日产量对比",textStyle:{color:"#00C4FF",fontSize:17},left:"center"},legend:{data:["一车间","二车间","三车间","平均产量"],itemWidth:15,itemHeight:8,top:"12%",right:"3%",textStyle:{color:"white",fontSize:13,fontStyle:"normal"}},grid:{bottom:"15%",top:"25%"},xAxis:{type:"category",name:"日期",data:t,axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},yAxis:{type:"value",name:"产量/kg",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},series:[{data:e,type:"line",name:"一车间"},{data:a,type:"line",name:"二车间"},{data:i,type:"line",name:"三车间"},{data:o,type:"line",name:"平均效率"}]};n.setOption(s),window.addEventListener("resize",function(){n.resize()})},echart3:function(t,e,a,i,o){var n=e.concat(a).concat(i).concat(o),s=Math.min.apply(Math,p()(n))-50,r=this.$echarts.init(document.getElementById("echartzz3"));r.clear();var l={title:{text:"车间日平均车速对比",textStyle:{color:"#00C4FF",fontSize:17},left:"center"},legend:{data:["一车间","二车间","三车间","平均车速"],itemWidth:15,itemHeight:8,top:"12%",right:"3%",textStyle:{color:"white",fontSize:13,fontStyle:"normal"}},grid:{bottom:"15%",top:"25%"},xAxis:{type:"category",name:"日期",data:t,axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},yAxis:{type:"value",name:"车速/ms",axisLabel:{show:!0,textStyle:{color:"rgba(238,219,219,1)",fontSize:10}},min:s.toFixed(0),axisLine:{lineStyle:{color:"#fff",width:1}},axisTick:{show:!1}},series:[{data:e,type:"line",name:"一车间"},{data:a,type:"line",name:"二车间"},{data:i,type:"line",name:"三车间"},{data:o,type:"line",name:"平均车速"}]};r.setOption(l),window.addEventListener("resize",function(){r.resize()})},getcz:function(){var t=this,e=[];m()({url:"http://47.110.242.174:10086/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{tableName:"wear_weaving",query:{status:2},selectFields:["product_name","count(*)"],groupByColumn:["product_name"]}}).then(function(t){console.log(t);for(var a=0;a<t.data.data.length;a++)t.data.data[a].flag="cz_table_one",t.data.data[a].flag1=" cz_table_one_span1",t.data.data[a].flag2=" cz_table_one_span2",t.data.data[a].num=t.data.data[a]["count(*)"];e=t.data.data}).then(function(){m()({url:"http://47.110.242.174:10086/report/getSimpleReport",method:"post",headers:{"Content-Type":"application/json",companyId:t.companyId},data:{tableName:"wear_weaving",query:{status:1},selectFields:["product_name","count(*)"],groupByColumn:["product_name"]}}).then(function(a){for(var i=0;i<a.data.data.length;i++)a.data.data[i].flag="cz_table_two",a.data.data[i].flag1=" cz_table_two_span1",a.data.data[i].flag2=" cz_table_two_span2",a.data.data[i].num=a.data.data[i]["count(*)"];e=e.concat(a.data.data),console.log(e),t.list=e})})}},filters:{},mounted:function(){this.getEff(),this.gettcl(),this.getrcl(),this.getspeed(),this.getliaoji(),this.getcz()}},c()(D,"filters",{upper:function(t){return t?(t=t.toString()).toUpperCase():""}}),c()(D,"beforeDestroy",function(){this.timer&&clearInterval(this.timer)}),D),j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content4"},[t._m(0),t._v(" "),a("div",{staticClass:"img"},[a("div",{staticClass:"img_con"},[a("a",{staticStyle:{"font-size":"1rem",color:"#5D7091","text-decoration":"none"},on:{click:function(e){return t.back()}}},[t._v("七星智能纺织")]),a("div",{staticClass:"jiantou"}),a("span",{staticStyle:{"margin-right":"1rem"}},[t._v("织机")])])]),t._v(" "),a("div",{staticClass:"monitor"},[a("div",{staticClass:"monitor_con"},[a("div",{staticClass:"table"},[a("div",{staticClass:"table_con"},[a("div",{staticClass:"table_head"},t._l(t.daylist,function(e,i){return a("div",{key:i,staticClass:"t_con",style:e.style},[t._v(t._s(e.name))])}),0),t._v(" "),a("div",{staticClass:"table_data"},t._l(t.tableData,function(e,i){return a("div",{key:i,staticClass:"table_one"},[a("div",{staticClass:"table_one_con",staticStyle:{width:"9.05%"}},[t._v(t._s(e.styleName))]),t._v(" "),a("div",{staticClass:"table_one_con"},[t._v(t._s(e.dayProductMeter))]),t._v(" "),a("div",{staticClass:"table_one_con"},[t._v(t._s(e.openMachineNum))]),t._v(" "),a("div",{staticClass:"table_one_con"},[t._v(t._s(e.liaoJiMachineNum))]),t._v(" "),a("div",{class:0==e.oneMorning?"table_one_con":"table_one_con2"},[t._v(t._s(e.oneMorning))]),t._v(" "),a("div",{class:0==e.oneNight?"table_one_con":"table_one_con2"},[t._v(t._s(e.oneNight))]),t._v(" "),a("div",{class:0==e.twoMorning?"table_one_con":"table_one_con2"},[t._v(t._s(e.twoMorning))]),t._v(" "),a("div",{class:0==e.twoNight?"table_one_con":"table_one_con2"},[t._v(t._s(e.twoNight))]),t._v(" "),a("div",{class:0==e.threeMorning?"table_one_con":"table_one_con2"},[t._v(t._s(e.threeMorning))]),t._v(" "),a("div",{class:0==e.threeNight?"table_one_con":"table_one_con2"},[t._v(t._s(e.threeNight))]),t._v(" "),a("div",{class:0==e.fourMorning?"table_one_con":"table_one_con2"},[t._v(t._s(e.fourMorning))]),t._v(" "),a("div",{class:0==e.fourNight?"table_one_con":"table_one_con2"},[t._v(t._s(e.fourNight))]),t._v(" "),a("div",{class:0==e.fiveMorning?"table_one_con":"table_one_con2"},[t._v(t._s(e.fiveMorning))]),t._v(" "),a("div",{class:0==e.fiveNight?"table_one_con":"table_one_con2"},[t._v(t._s(e.fiveNight))]),t._v(" "),a("div",{class:0==e.sixMorning?"table_one_con":"table_one_con2"},[t._v(t._s(e.sixMorning))]),t._v(" "),a("div",{class:0==e.sixNight?"table_one_con":"table_one_con2"},[t._v(t._s(e.sixNight))])])}),0)])]),t._v(" "),a("div",{staticClass:"echart"},[a("div",{staticClass:"echart_one",attrs:{id:"echartzz"}}),t._v(" "),a("div",{staticClass:"echart_one",attrs:{id:"echartzz2"}}),t._v(" "),a("div",{staticClass:"echart_one",attrs:{id:"echartzz3"}}),t._v(" "),a("div",{staticClass:"echart_one",attrs:{id:"echartzz4"}}),t._v(" "),a("div",{staticClass:"cz_table"},[a("div",{staticClass:"cz_table_con_title"},[t._v("穿棕车间实际情况")]),t._v(" "),a("div",{staticClass:"cz_table_con"},t._l(t.list,function(e,i){return a("div",{key:i,class:e.flag},[a("span",{class:e.flag1},[t._v(t._s(e.product_name))]),t._v(" "),a("span",{class:e.flag2},[t._v(t._s(e.num)+"个")])])}),0)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("七星智能纺织-织机")]),this._v(" "),e("h1",{staticClass:"tip"})])}]};var T=a("VU/8")(A,j,!1,function(t){a("d4xf")},"data-v-afd69aae",null).exports,M=a("XLwt"),N=a.n(M),W=a("0Pck"),$=a.n(W),P=a("TXmL");i.default.use(P.a),i.default.prototype.$echarts=N.a,i.default.use(n.a),i.default.config.productionTip=!1,i.default.use(l.a),i.default.prototype.playAudio=function(){var t=document.getElementById("eventAudio");t.setAttribute("src",$.a),t.load();var e=t.play();void 0!==e&&e.then(function(){t.play()}).catch(function(){t.play()})};var B=new P.a({locale:"zh-CN",messages:{"zh-CN":a("xZXS"),"en-US":a("/uab")}}),O=new l.a({routes:[{path:"/productMonitor2/:id",component:_,name:"productMonitor2"},{path:"/yb/:id/:workshopid",component:E,name:"yb"},{path:"/zj/:id/:workshopid",component:z,name:"zj"},{path:"/js/:id/:workshopid",component:I,name:"js"},{path:"/zz/:id/:workshopid",component:T,name:"zz"}]});new i.default({el:"#app",i18n:B,router:O,components:{App:r},template:"<App/>"})},d4xf:function(t,e){},kHnr:function(t,e){},tvR6:function(t,e){},uOMB:function(t,e){},vqrG:function(t,e){},xZXS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"lang",function(){return i});var i={chanliangtuyi:"产量推移图",factoryName:["鑫海一","鑫海二","赐源","鑫浪"],factory:[{value:"1",label:"鑫海一分厂"},{value:"2",label:"鑫海二分厂"},{value:"3",label:"赐源"},{value:"4",label:"鑫浪"}],tingjishebei:"停机设备",shengchanjvjiao:"生产聚焦",zongchanlaingduibi:"总产量对比",problemOptions:[{value:"4",label:"效率优秀设备"},{value:"5",label:"产量优秀设备"},{value:"1",label:"效率落后设备"},{value:"2",label:"产量落后设备"},{value:"3",label:"断头落后设备"}],jingshatingche:"经纱停车",weishatingche:"纬纱停车",qitatingche:"其他",xiaolvzuigao:"效率:最高",pingjun:"平均",kaijixiaolv:"开机效率",chanliang:"产量",liaojiyuce:"了机预测",dangqianliaoji:"当前了机",yujingtuisong:"预警推送",shebeihao:"设备号",yuceshijian:"预测时间(h)",chixushijian:"持续时间(h)",shengyujingzhouchang:"剩余经轴长",shijian:"时间",leibie:"类别",miaoshu:"描述",zongchanliang:"总产量",xishuchanliang:"系数产量",mi:"米",zongchanliangduibi:["昨天系数产量","今天系数产量","昨天产量","今天产量"],warpTitle:"整经",sizingTitle:"浆纱",stop:"停机",run:"运行",dangriduantou:"当日断头",shedingjingchang:"设定经长",dangqiangjingchang:"当前经长",pinzhong:"品种",shedingshachang:"设定纱长",dangqianshachang:"当前纱长",shebeibianhao:"设备编号",shebeizhuangtai:"设备状态",toufen:"头份",zhouhao:"轴号",chesu:"车速",shangwendu:"上温度",xiawendu:"下温度",caotongwendu:"槽筒温度",hongtongdianliu:"烘筒电流"}}},["NHnr"]);
//# sourceMappingURL=app.d6e4587289fd89cc896f.js.map